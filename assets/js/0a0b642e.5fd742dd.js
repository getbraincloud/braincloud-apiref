"use strict";(self.webpackChunkdocusauruns_ts=self.webpackChunkdocusauruns_ts||[]).push([[55931],{3905:(e,t,a)=>{a.d(t,{Zo:()=>m,kt:()=>h});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),u=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},m=function(e){var t=u(e.components);return n.createElement(s.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),p=u(a),c=r,h=p["".concat(s,".").concat(c)]||p[c]||d[c]||o;return a?n.createElement(h,i(i({ref:t},m),{},{components:a})):n.createElement(h,i({ref:t},m))}));function h(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=c;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[p]="string"==typeof e?e:r,i[1]=l;for(var u=2;u<o;u++)i[u]=a[u];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}c.displayName="MDXCreateElement"},68996:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>p,frontMatter:()=>o,metadata:()=>l,toc:()=>u});var n=a(87462),r=(a(67294),a(3905));const o={title:"Introducing Global Tournaments",date:"2017-01-30",authors:"paul",tags:["blog"],coverImage:"Tournament-Entities-Simplified.png"},i=void 0,l={permalink:"/braincloud-apiref/blog/2017/01/30/introducing-global-tournaments",editUrl:"https://github.com/getbraincloud/braincloud-apiref/tree/main/blog/2017-01-30-introducing-global-tournaments/index.md",source:"@site/blog/2017-01-30-introducing-global-tournaments/index.md",title:"Introducing Global Tournaments",description:"Introduction",date:"2017-01-30T00:00:00.000Z",formattedDate:"January 30, 2017",tags:[{label:"blog",permalink:"/braincloud-apiref/blog/tags/blog"}],readingTime:7.465,hasTruncateMarker:!1,authors:[{name:"Paul Winterhalder",title:"brainCloud product owner",url:"https://github.com/winterhalder",imageURL:"https://github.com/winterhalder.png",key:"paul"}],frontMatter:{title:"Introducing Global Tournaments",date:"2017-01-30",authors:"paul",tags:["blog"],coverImage:"Tournament-Entities-Simplified.png"},prevItem:{title:"Wrappers, Clients and Inconvenient Singletons...",permalink:"/braincloud-apiref/blog/2017/12/12/wrappers-clients-and-inconvenient-singletons"},nextItem:{title:"Parse and who can you trust?",permalink:"/braincloud-apiref/blog/2016/01/30/parse-and-who-can-you-trust"}},s={authorsImageUrls:[void 0]},u=[{value:"Introduction",id:"introduction",level:2},{value:"Goals",id:"goals",level:2},{value:"Features",id:"features",level:2},{value:"Design",id:"design",level:2},{value:"Concepts",id:"concepts",level:3},{value:"Tournament interactions / api",id:"tournament-interactions--api",level:3},{value:"Phases and States",id:"phases-and-states",level:3},{value:"Events and Notifications",id:"events-and-notifications",level:3},{value:"Special: Scoring notifications",id:"special-scoring-notifications",level:4},{value:"Bonus Features: Auto Join and Auto Reward",id:"bonus-features-auto-join-and-auto-reward",level:4},{value:"Features Availability and Billing Notes",id:"features-availability-and-billing-notes",level:2}],m={toc:u};function p(e){let{components:t,...o}=e;return(0,r.kt)("wrapper",(0,n.Z)({},m,o,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"introduction"},"Introduction"),(0,r.kt)("p",null,"brainCloud's new\xa0",(0,r.kt)("strong",{parentName:"p"},"Global Tournaments"),"\xa0feature is an entirely new system designed to amplify player engagement in your games."),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Global Tournaments"),"\xa0are suitable for any game where competition centres around\xa0",(0,r.kt)("em",{parentName:"p"},"leaderboards"),". In fact, in their simplest version,\xa0",(0,r.kt)("em",{parentName:"p"},"Global Tournaments"),"\xa0can be thought of simply as\xa0",(0,r.kt)("em",{parentName:"p"},"prize rules"),"\xa0associated with a\xa0",(0,r.kt)("em",{parentName:"p"},"leaderboard"),"."),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"But as you will see, there is actually a whole lot more to them.")),(0,r.kt)("h2",{id:"goals"},"Goals"),(0,r.kt)("p",null,"When designing\xa0",(0,r.kt)("strong",{parentName:"p"},"Global Tournaments"),", we had a specific set of goals in mind."),(0,r.kt)("p",null,"brainCloud's Global Tournaments should:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Be\xa0",(0,r.kt)("em",{parentName:"li"},"easy"),"\xa0to add to apps"),(0,r.kt)("li",{parentName:"ul"},"Be\xa0",(0,r.kt)("em",{parentName:"li"},"flexible"),"\xa0in terms of tournament schedule, phases, rules, payouts, etc."),(0,r.kt)("li",{parentName:"ul"},"Integrate with brainCloud's existing\xa0",(0,r.kt)("em",{parentName:"li"},"reward"),"\xa0systems"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"Automate"),"\xa0key aspects of player engagement"),(0,r.kt)("li",{parentName:"ul"},"Be\xa0",(0,r.kt)("em",{parentName:"li"},"manageable"),"\xa0so that entry fees, prize amounts, etc. can change over time as you iterate"),(0,r.kt)("li",{parentName:"ul"},"Act as building blocks for building more complex tournament types (i.e. tiered tournaments, etc.)"),(0,r.kt)("li",{parentName:"ul"},"Work within the existing brainCloud pricing tiers")),(0,r.kt)("h2",{id:"features"},"Features"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Global Tournaments"),"\xa0support the following key features:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Duration"),"\xa0- support for daily, weekly, and arbitrary length tournaments (up to 14 days)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Phases"),"\xa0- support for optional\xa0",(0,r.kt)("em",{parentName:"li"},"announcement"),",\xa0",(0,r.kt)("em",{parentName:"li"},"enrollment"),",\xa0",(0,r.kt)("em",{parentName:"li"},"competition"),",\xa0",(0,r.kt)("em",{parentName:"li"},"buffer"),"\xa0and\xa0",(0,r.kt)("em",{parentName:"li"},"award"),"\xa0phases"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Flexible Prizes"),"\xa0- Award participants any combination of\xa0",(0,r.kt)("em",{parentName:"li"},"virtual currency"),",\xa0",(0,r.kt)("em",{parentName:"li"},"xp"),",\xa0",(0,r.kt)("em",{parentName:"li"},"player stats"),",\xa0",(0,r.kt)("em",{parentName:"li"},"achievements"),"\xa0and\xa0",(0,r.kt)("em",{parentName:"li"},"custom data")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Entry fees"),"\xa0- Free vs. Paid Tournaments"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Push Notifications"),"\xa0- automatically send configurable push notifications at key points during the tournament"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Email Integration"),"\xa0- send custom email notifications as well")),(0,r.kt)("h2",{id:"design"},"Design"),(0,r.kt)("h3",{id:"concepts"},"Concepts"),(0,r.kt)("p",null,"This diagram describes the main entities involved in creating a Tournament:"),(0,r.kt)("p",null,(0,r.kt)("a",{target:"_blank",href:a(70497).Z},(0,r.kt)("img",{src:a(32687).Z,width:"767",height:"491"}))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Leaderboards are defined in the brainCloud system by entities we call ",(0,r.kt)("em",{parentName:"li"},"Leaderboard Configs")),(0,r.kt)("li",{parentName:"ul"},"To create a tournament, you attach a\xa0",(0,r.kt)("em",{parentName:"li"},"Tournament Template"),"\xa0to a\xa0",(0,r.kt)("em",{parentName:"li"},"Leaderboard Config")),(0,r.kt)("li",{parentName:"ul"},"The\xa0",(0,r.kt)("em",{parentName:"li"},"Tournament Template"),"\xa0defines the rules of a tournament - entry fees, prize rules, notification templates, etc."),(0,r.kt)("li",{parentName:"ul"},"The\xa0",(0,r.kt)("em",{parentName:"li"},"Leaderboard Config"),"\xa0defines how scoring works (highest score, cumulative score, etc), the rotation schedule, and also the\xa0",(0,r.kt)("em",{parentName:"li"},"pacing of the tournament phases"),"."),(0,r.kt)("li",{parentName:"ul"},"Each rotation of the leaderboard is a\xa0",(0,r.kt)("em",{parentName:"li"},"Leaderboard Version"),". All scores are stored by version in ",(0,r.kt)("em",{parentName:"li"},"Leaderboard Entry")," objects.")),(0,r.kt)("p",null,"Special rules:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"The same\xa0",(0,r.kt)("em",{parentName:"li"},"tournament template"),"\xa0may be used by\xa0",(0,r.kt)("em",{parentName:"li"},"multiple leaderboards"),". This of course creates a separate tournament per leaderboard."),(0,r.kt)("li",{parentName:"ul"},"A leaderboard may also attach\xa0",(0,r.kt)("em",{parentName:"li"},"multiple tournament templates"),". This is useful for cases where you want to have both free and paid versions of a tournament, that act upon the same set of scores. (",(0,r.kt)("em",{parentName:"li"},"rationale: better liquidity, smaller payouts"),")")),(0,r.kt)("h3",{id:"tournament-interactions--api"},"Tournament interactions / api"),(0,r.kt)("p",null,"The following are the key tournament interactions to understand:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"Get Tournament Status"),"\xa0- returns the status of the specified tournament, and whether the player is currently enrolled in it. If the player is not enrolled, returns details of\xa0",(0,r.kt)("em",{parentName:"li"},"all")," the tournament configs associated with the leaderboard"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"Join Tournament"),"\xa0- all tournaments must be joined before you can submit scores to them. Joining a tournament involves specifying the leaderboard that anchors the tournament, and the\xa0",(0,r.kt)("inlineCode",{parentName:"li"},"tCode"),"\xa0of the tournament ","[template]"," that you are joining.\xa0",(0,r.kt)("em",{parentName:"li"},"An entry fee will automatically be deducted from the player's currency balance if required.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"Post Tournament Score"),"\xa0- posts an score to the tournament leaderboard. Note that you must pass in the epoch time that the game round started in, to ensure that the score is eligible. ",(0,r.kt)("em",{parentName:"li"},"Note that there are\xa0several versions of this operation (see the API for details).")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"View Current Reward"),"\xa0- returns the player's standing in the currently active tournament, and the reward they can expect to receive if they keep this rank."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"View Reward"),"\xa0- returns the players reward for a completed tournament, and whether it has already been claimed. Will return an error if the player is not enrolled in the tournament."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/api/capi/event/getevents"},(0,r.kt)("em",{parentName:"a"},"Check For Events"))," - query the brainCloud events queue to see if any Tournament Completion events have arrived"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"Claim Tournament Reward"),"\xa0- claims the rewards for a completed tournament, incrementing appropriate player balances (currencies, etc.).")),(0,r.kt)("p",null,"For more information\xa0on these interactions, see the ",(0,r.kt)("a",{parentName:"p",href:"/api/capi/tournament"},"Tournament API"),"."),(0,r.kt)("h3",{id:"phases-and-states"},"Phases and States"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Tournament States")," are used to organize the larger tournament lifecycle. They determine when tournaments are active, processing award calculations, and available for award clams."),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Tournament Phases")," help to micro-manage when players can join tournaments, post scores, etc. throughout the Active tournament state."),(0,r.kt)("p",null,"The following diagram summarizes the relationship between brainCloud tournament states and phases:"),(0,r.kt)("p",null,(0,r.kt)("a",{target:"_blank",href:a(8925).Z},(0,r.kt)("img",{src:a(3219).Z,width:"767",height:"587"}))),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Note that brainCloud doesn't explicitly tell you the phase\xa0it is in - instead,\xa0it gives you information as to when registration starts and ends, when play starts and ends, etc.")),(0,r.kt)("h3",{id:"events-and-notifications"},"Events and Notifications"),(0,r.kt)("p",null,"A key goal of brainCloud's Global Tournaments system is to automate the tournaments interactions with players. As such, the system:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Automatically rotates and cycles through tournament states and phases as per the schedule defined"),(0,r.kt)("li",{parentName:"ul"},"Send events to players when the tournament has completed"),(0,r.kt)("li",{parentName:"ul"},"Optionally sends push notifications and/or emails",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"When a\xa0new tournament opens for registration (enrollment) - sent to previous tournament participants"),(0,r.kt)("li",{parentName:"ul"},"When a new tournament opens for play (competition) - sent to previous and currently registered participants"),(0,r.kt)("li",{parentName:"ul"},"When a tournament's competition phase is close to ending - sent to current participants"),(0,r.kt)("li",{parentName:"ul"},"When another player beats their tournament score, bumping them down a rank - sent to current participants within 10 ranks of the player who posted the score"),(0,r.kt)("li",{parentName:"ul"},"When a tournament completes and they're awards are ready to be claimed - sent to current participants. The system also sends an Event to the player's event queue.")))),(0,r.kt)("p",null,(0,r.kt)("a",{target:"_blank",href:a(30006).Z},(0,r.kt)("img",{src:a(98771).Z,width:"847",height:"710"}))),(0,r.kt)("p",null,"Note that you shouldn't blindly configure all notifications - especially the email-based notifications. Some recommendations:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Obviously, do not configure both Tournament Registration start and Tournament Play start if your tournament doesn't have an exclusive registration period, or your players will get two back-to-back notifications, and be annoyed."),(0,r.kt)("li",{parentName:"ul"},"Be careful about configuring Email-based notifications - we've included the trigger points, but for most cases we would recommend that you mostly use them to announce that a tournament is complete and that the player should come collect their prize. It's also a handy opportunity to include info on other game offers, bonuses items to increase scores, etc."),(0,r.kt)("li",{parentName:"ul"},"Be aware that brainCloud does not yet support automated unsubscribes\xa0(coming soon)")),(0,r.kt)("h4",{id:"special-scoring-notifications"},"Special: Scoring notifications"),(0,r.kt)("p",null,"There are two types of designers. Designers who think that scoring notifications are cool, and those that think they could get annoying very quickly. And they are both right."),(0,r.kt)("p",null,"To add the engagement of scoring notifications, hopefully without overwhelming the player, we've added the following rules:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"We'll only send a player\xa0",(0,r.kt)("em",{parentName:"li"},"one"),"\xa0scoring notification per 24-hour period")),(0,r.kt)("p",null,"The are two additional rules that affect this:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"If you post a new score, we reset the notification clock. This means that engaged players\xa0",(0,r.kt)("em",{parentName:"li"},"will"),"\xa0receive more than one notification in a 24 hour period, because they're actually responding to them."),(0,r.kt)("li",{parentName:"ul"},"We won't send the player a score update until at least 30 minutes after their last posted score (i.e. you don't want to receive a push notification\xa0",(0,r.kt)("em",{parentName:"li"},"immediately"),"\xa0after exiting the game)")),(0,r.kt)("h4",{id:"bonus-features-auto-join-and-auto-reward"},"Bonus Features: Auto Join and Auto Reward"),(0,r.kt)("p",null,"Global Tournaments\xa0offer an incredible way to increase engagement and monetization with your players -\xa0but\xa0what if you are just looking for a quick way to automatically add rewards to your weekly leaderboards - without code changes?"),(0,r.kt)("p",null,"Look no further - brainCloud has two new features that\xa0allow you to automate the key portions of the tournament processing:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"Auto Join")," - Enables\xa0players to automatically join the tournament associated with a leaderboard, simply by posting a score to it (via the standard leaderboard PostScore method). Note that this only works for leaderboards that have ",(0,r.kt)("em",{parentName:"li"},"one-and-only-one tournament")," associated with them - and that tournament must be ",(0,r.kt)("em",{parentName:"li"},"free"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"Auto Claim")," - Causes tournament rewards to be automatically claimed by players during login. Note that the ",(0,r.kt)("em",{parentName:"li"},"[x]"," Enable Tournament Auto Claim check at login")," compatibility flag\xa0must also be enabled on the Design | Core App Info | Advanced page of the portal")),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Note - although we provide the Auto Join and Auto Claim features for convenience, in most cases we would definitely recommend that you implement the full tournament API. A key benefit to tournaments is engaging with your players - getting them excited about what they can win and adding that extra flourish as they claim their prizes. Auto Join and Auto Claim hide all that - minimizing\xa0the opportunity\xa0for extra player engagement.")),(0,r.kt)("h2",{id:"features-availability-and-billing-notes"},"Features Availability and Billing Notes"),(0,r.kt)("p",null,"Global Tournaments are available across all brainCloud subscription plans."),(0,r.kt)("p",null,"The basic API billing rules are in effect - 1 API count per API call, 1 API count per Push Notification, 1 API count per Email Sent"),(0,r.kt)("p",null,"In addition, the following counts are added to offset the overheads of automated tournaments:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("em",{parentName:"li"},"Awards Calculation")," - At the end of the tournament, 1\xa0Bulk API Count ",(0,r.kt)("em",{parentName:"li"},"per participant")," is charged to cover the CPU load of processing results and sending events to the players"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"/api/capi/tournament/posttournamentscorewithresultsutc"},(0,r.kt)("em",{parentName:"a"},"PostTournamentScoreWithResultsUTC()")),"\xa0- adds 1\xa0Bulk API count to cover the overhead of comparing the players previous and current tournament results, and determining whether to send notifications to displaced players. As compensation, however, returns the updated tournament results (essentially ",(0,r.kt)("a",{parentName:"li",href:"/api/capi/leaderboard/getgloballeaderboardview"},"GetGlobalLeaderboardView()"),"), hopefully saving the app an API call in return."),(0,r.kt)("li",{parentName:"ul"},"Auto Claim - if the Auto-Claim feature is enabled, 0.5\xa0Bulk API Counts are\xa0added to each Authentication()")))}p.isMDXComponent=!0},30006:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/files/2017-01-29_23-22-52-c5d744f8262d702943e13f2d73cb4408.png"},70497:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/files/Tournament-Entities-Simplified-62a976af90b310090a4397db0a96cc51.png"},8925:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/files/Tournament-States-and-Phases-2cd5c52ab84e1537c8e8261fbe8914cb.png"},98771:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/2017-01-29_23-22-52-c5d744f8262d702943e13f2d73cb4408.png"},32687:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Tournament-Entities-Simplified-62a976af90b310090a4397db0a96cc51.png"},3219:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/Tournament-States-and-Phases-2cd5c52ab84e1537c8e8261fbe8914cb.png"}}]);