"use strict";(self.webpackChunkdocusauruns_ts=self.webpackChunkdocusauruns_ts||[]).push([[10021],{3905:(e,t,i)=>{i.d(t,{Zo:()=>d,kt:()=>f});var a=i(67294);function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function r(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,a)}return i}function o(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(Object(i),!0).forEach((function(t){n(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function l(e,t){if(null==e)return{};var i,a,n=function(e,t){if(null==e)return{};var i,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)i=r[a],t.indexOf(i)>=0||(n[i]=e[i]);return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)i=r[a],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}var p=a.createContext({}),c=function(e){var t=a.useContext(p),i=t;return e&&(i="function"==typeof e?e(t):o(o({},t),e)),i},d=function(e){var t=c(e.components);return a.createElement(p.Provider,{value:t},e.children)},s="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var i=e.components,n=e.mdxType,r=e.originalType,p=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),s=c(i),u=n,f=s["".concat(p,".").concat(u)]||s[u]||h[u]||r;return i?a.createElement(f,o(o({ref:t},d),{},{components:i})):a.createElement(f,o({ref:t},d))}));function f(e,t){var i=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=i.length,o=new Array(r);o[0]=u;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[s]="string"==typeof e?e:n,o[1]=l;for(var c=2;c<r;c++)o[c]=i[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,i)}u.displayName="MDXCreateElement"},49899:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>l,toc:()=>c});var a=i(87462),n=(i(67294),i(3905));const r={},o="Identity",l={unversionedId:"api/capi/identity/index",id:"api/capi/identity/index",title:"Identity",description:"Overview",source:"@site/docs/api/2_capi/identity/index.md",sourceDirName:"api/2_capi/identity",slug:"/api/capi/identity/",permalink:"/braincloud-apiref/api/capi/identity/",draft:!1,editUrl:"https://github.com/getbraincloud/braincloud-apiref/tree/main/docs/api/2_capi/identity/index.md",tags:[],version:"current",lastUpdatedBy:"jasonl",lastUpdatedAt:1671809255,formattedLastUpdatedAt:"Dec 23, 2022",frontMatter:{},sidebar:"apiSidebar",previous:{title:"UpdateGroupSummaryData",permalink:"/braincloud-apiref/api/capi/group/updategroupsummarydata"},next:{title:"Attach",permalink:"/braincloud-apiref/api/capi/identity/attach"}},p={},c=[{value:"Overview",id:"overview",level:2},{value:"Merging / Switching Profiles",id:"merging--switching-profiles",level:3},{value:"API Summary",id:"api-summary",level:3},{value:"Child Profiles:",id:"child-profiles",level:3},{value:"Peer:",id:"peer",level:3},{value:"Cloud Code Only:",id:"cloud-code-only",level:3}],d=(s="DocCardList",function(e){return console.warn("Component "+s+" was not imported, exported, or provided by MDXProvider as global scope"),(0,n.kt)("div",e)});var s;const h={toc:c};function u(e){let{components:t,...i}=e;return(0,n.kt)("wrapper",(0,a.Z)({},h,i,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"identity"},"Identity"),(0,n.kt)("h2",{id:"overview"},"Overview"),(0,n.kt)("p",null,"The Identity APIs are used to attach additional identities to a profile \u2013 these APIs are most commonly used for apps that allow users to begin anonymously, and later encourage them to attach their Facebook ID for additional social features."),(0,n.kt)("p",null,"The identity APIs are organized into the following operations:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"AttachIdentity")," \u2013 attach an additional identity to the current profile.  Note, attaching an authenticated identity to an anonymous profile (i.e. a profile which previously only had an anonymous identity associated with it) \u2013 the app should be sure to use the new authenticated identity when logging in as the user in the future.  Note \u2013 there are special scenarios to consider if the new identity is already associated with another profile ","[for this app/game]"," \u2014 see below."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"DetachIdentity")," \u2013 used if the user wishes to detach an identity from a profile."),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("strong",{parentName:"li"},"MergeIdentity")," \u2013 used if the user wants to merge the current profile with a profile associated with a provided identity \u2014 see below for more details.")),(0,n.kt)("h3",{id:"merging--switching-profiles"},"Merging / Switching Profiles"),(0,n.kt)("p",null,"Consider this scenario:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"John played your game on Facebook Canvas"),(0,n.kt)("li",{parentName:"ul"},"John decided to also try your game on iOS \u2013 and for simplicity sake, decided to skip logging in and continue as an anonymous user to get a feel for your app"),(0,n.kt)("li",{parentName:"ul"},"Later, John decides that he'd like to see his friends scores in the leaderboards \u2013 so he hit the button to ","[Connect to Facebook]"," from the game"),(0,n.kt)("li",{parentName:"ul"},"Your game dutifully calls ",(0,n.kt)("a",{parentName:"li",href:"/api/capi/identity/attachfacebookidentity"},"AttachFacebookIdentity")," \u2013 and gets an error because John's Facebook ID is already associated with a different profile (established via the Facebook Canvas version of the game)")),(0,n.kt)("p",null,"At this point, you probably want to offer John two choices:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"He can choose to switch to the other profile (which is already associated with his Facebook identity), abandoning the little bit of campaign history that he may have built up on the iOS version of the game.  If he chooses ","[Switch]",", the app should re-authenticate with brainCloud, passing in the Facebook Identity and passing in a -1 for the anonymous identity (which indicates to the server that you know that this may switch profiles)"),(0,n.kt)("li",{parentName:"ol"},"He can choose to merge the profiles \u2013 which is accomplished by calling ",(0,n.kt)("a",{parentName:"li",href:"/api/capi/identity/mergefacebookidentity"},"MergeFacebookIdentity"),'.  This will merge the contents of the two profiles, preserving the majority of the data of the profile with the highest XP, and aggregating any of the stats that have been set as "additive" in the Design Portal.  In addition, all virtual currency balances will be summed between the two profiles.')),(0,n.kt)("p",null,"Finally, in an alternate version of this scenario John might have a 3rd option.  If he'd previously played the app on Android, but still connected to Facebook for it \u2013 the same general scenario would have occurred.  But John could optionally go to the Android version of the game, choose ","[Disconnect from Facebook]"," to detach his Facebook identity, and then go to the iOS game and hit ","[Connect to Facebook]",".  The result would be that his Facebook identity has moved from being associated with the Android profile to the iOS profile\u2026  (not sure why he'd want that, but it's a valid scenario)"),(0,n.kt)("h3",{id:"api-summary"},"API Summary"),(0,n.kt)("h3",{id:"child-profiles"},"Child Profiles:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"/api/capi/identity/switchtosingletonchildprofile"},"SwitchToSingletonChildProfile")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"/api/capi/identity/switchtochildprofile"},"SwitchToChildProfile")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"/api/capi/identity/switchtoparentprofile"},"SwitchToParentProfile")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"/api/capi/identity/attachparentwithidentity"},"AttachParentWithIdentity")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"/api/capi/identity/getchildprofiles"},"GetChildProfiles")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"/api/capi/identity/detachparent"},"DetachParent"))),(0,n.kt)("h3",{id:"peer"},"Peer:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"/api/capi/identity/attachpeerprofile"},"AttachPeerProfile")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"/api/capi/identity/detachpeer"},"DetachPeer")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"/api/capi/identity/getpeerprofiles"},"GetPeerProfiles"))),(0,n.kt)("h3",{id:"cloud-code-only"},"Cloud Code Only:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"/api/capi/identity/attach"},"Attach")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"/api/capi/identity/detach"},"Detach")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"/api/capi/identity/merge"},"Merge")),(0,n.kt)("li",{parentName:"ul"},(0,n.kt)("a",{parentName:"li",href:"/api/capi/identity/syschangeemailidentity"},"SysChangeEmailIdentity"))),(0,n.kt)(d,{mdxType:"DocCardList"}))}u.isMDXComponent=!0}}]);