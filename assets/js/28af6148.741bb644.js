"use strict";(self.webpackChunkdocusauruns_ts=self.webpackChunkdocusauruns_ts||[]).push([[84054],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>g});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},p=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),c=u(n),h=i,g=c["".concat(s,".").concat(h)]||c[h]||d[h]||r;return n?a.createElement(g,l(l({ref:t},p),{},{components:n})):a.createElement(g,l({ref:t},p))}));function g(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,l=new Array(r);l[0]=h;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[c]="string"==typeof e?e:i,l[1]=o;for(var u=2;u<r;u++)l[u]=n[u];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},31048:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>c,frontMatter:()=>r,metadata:()=>o,toc:()=>u});var a=n(87462),i=(n(67294),n(3905));const r={title:"Getting Started With Blueprints",date:"2015-11-05"},l=void 0,o={unversionedId:"learn/sdk-tutorials/unreal-tutorials/getting-started-with-blueprints/index",id:"learn/sdk-tutorials/unreal-tutorials/getting-started-with-blueprints/index",title:"Getting Started With Blueprints",description:"This tutorial will introduce you to the basics of using brainCloud in Blueprints. \xa0We will start by setting up the BrainCloudClient, then authenticating and making a few simple API calls. Finally, we will go over parsing JSON in Blueprints.",source:"@site/docs/learn/6_sdk-tutorials/unreal-tutorials/getting-started-with-blueprints/index.md",sourceDirName:"learn/6_sdk-tutorials/unreal-tutorials/getting-started-with-blueprints",slug:"/learn/sdk-tutorials/unreal-tutorials/getting-started-with-blueprints/",permalink:"/braincloud-apiref/learn/sdk-tutorials/unreal-tutorials/getting-started-with-blueprints/",draft:!1,editUrl:"https://github.com/getbraincloud/braincloud-apiref/tree/main/docs/learn/6_sdk-tutorials/unreal-tutorials/getting-started-with-blueprints/index.md",tags:[],version:"current",lastUpdatedBy:"jasonl",lastUpdatedAt:1672679892,formattedLastUpdatedAt:"Jan 2, 2023",frontMatter:{title:"Getting Started With Blueprints",date:"2015-11-05"},sidebar:"learnSidebar",previous:{title:"Building The Plugin For Older Versions of Unreal",permalink:"/braincloud-apiref/learn/sdk-tutorials/unreal-tutorials/building-the-plugin-for-older-versions-of-unreal/"},next:{title:"Getting Started With C++",permalink:"/braincloud-apiref/learn/sdk-tutorials/unreal-tutorials/getting-started-with-cpp/"}},s={},u=[{value:"Prerequisites",id:"prerequisites",level:3},{value:"Initialization",id:"initialization",level:3},{value:"Updating the Client",id:"updating-the-client",level:3},{value:"Debug Logging",id:"debug-logging",level:3},{value:"The brainCloud Node Structure",id:"the-braincloud-node-structure",level:3},{value:"Authentication",id:"authentication",level:3},{value:"Calling the API",id:"calling-the-api",level:3},{value:"JSON Parsing in Blueprint",id:"json-parsing-in-blueprint",level:3}],p={toc:u};function c(e){let{components:t,...r}=e;return(0,i.kt)("wrapper",(0,a.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"This tutorial will introduce you to the basics of using brainCloud in Blueprints. \xa0We will start by setting up the BrainCloudClient, then authenticating and making a few simple API calls. Finally, we will go over parsing JSON in Blueprints."),(0,i.kt)("h3",{id:"prerequisites"},"Prerequisites"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Created a brainCloud Portal account"),(0,i.kt)("li",{parentName:"ul"},"Created a game in the brainCloud Portal. If you need help with this step refer to the ",(0,i.kt)("a",{parentName:"li",href:"/learn/sdk-tutorials/unity-tutorials/unity-getting-started/"},"Unity Tutorial #1 video"),"."),(0,i.kt)("li",{parentName:"ul"},"An Unreal project with the brainCloud plugin installed as described ",(0,i.kt)("a",{parentName:"li",href:"/learn/sdk-tutorials/unreal-tutorials/setting-up-the-braincloud-plugin/"},"here")),(0,i.kt)("li",{parentName:"ul"},"Basic experience with Blueprint, see the ",(0,i.kt)("a",{parentName:"li",href:"https://docs.unrealengine.com/latest/INT/Engine/Blueprints/GettingStarted/index.html"},"Unreal documentation")," for help")),(0,i.kt)("h3",{id:"initialization"},"Initialization"),(0,i.kt)("p",null,"Before you can do anything with brainCloud the BrainCloudClient must be initialized. \xa0This is accomplished by providing your App's details to the Client via the Initialize function."),(0,i.kt)("p",null,"To keep things simple\xa0we will do everything in the Level Blueprint and off of the Event BeginPlay node."),(0,i.kt)("p",null,'Start by dragging off of the Event node and adding the Initialize function node. \xa0You can find it by just typing "initialize" and selecting it under the "Client" category, or you can find it manually by looking in BrainCloud>Client.'),(0,i.kt)("p",null,(0,i.kt)("img",{src:n(52768).Z,width:"792",height:"359"})),(0,i.kt)("p",null,"You should now have the Initialize node on the Graph. \xa0The information you need to initialize comes from the Core App Info > Application IDs page in the brainCloud web portal."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Server Url -")," The URL (default value: ",(0,i.kt)("a",{parentName:"li",href:"https://sharedprod.braincloudservers.com/dispatcherv2"},"https://sharedprod.braincloudservers.com/dispatcherv2"),") of the brainCloud server to connect to. You should not have to change this."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Secret Key")," - The\xa0",(0,i.kt)("strong",{parentName:"li"},"App Secret")," for your application"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"App Id")," - The game (or in the portal page ",(0,i.kt)("strong",{parentName:"li"},"App ID"),") of your application"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Game Version")," - The current version of your application")),(0,i.kt)("p",null,"You should set the default values of these variables of secrect key, app id and game version in your blueprint, by doing that, you can use get-version to get their values respectively."),(0,i.kt)("h3",{id:"updating-the-client"},"Updating the Client"),(0,i.kt)("p",null,"The BrainCloudClient relies on its ",(0,i.kt)("strong",{parentName:"p"},"Run Callbacks")," function being called every frame, without this, all your API calls will receive no responses! \xa0The easiest way to set this up is to attach the\xa0",(0,i.kt)("strong",{parentName:"p"},"Run Callbacks")," function node (which can be found under BrainCloud > Client) to the Level Blueprint's ",(0,i.kt)("strong",{parentName:"p"},"Event Tick")," node."),(0,i.kt)("p",null,(0,i.kt)("img",{src:n(78907).Z,width:"432",height:"148"})),(0,i.kt)("h3",{id:"debug-logging"},"Debug Logging"),(0,i.kt)("p",null,"Logging can be an invaluable tool when working on your project. \xa0By default logging is disabled in brainCloud, however, it can easily be enabled by calling the\xa0",(0,i.kt)("strong",{parentName:"p"},"Enable Logging")," function\xa0(which can be found under BrainCloud > Client). \xa0Logging can just as easily be disabled with the same function."),(0,i.kt)("p",null,"BrainCloud will log many things, but\xa0among the most useful\xa0are the JSON requests and responses. To view the logs you need to open the\xa0",(0,i.kt)("strong",{parentName:"p"},"Output Log")," window in the Unreal Editor, found under Window > Developer Tools > Output Log."),(0,i.kt)("p",null,"Let's\xa0enable logging after we\xa0authenticate:"),(0,i.kt)("p",null,(0,i.kt)("img",{src:n(18965).Z,width:"382",height:"143"})),(0,i.kt)("h3",{id:"the-braincloud-node-structure"},"The brainCloud Node Structure"),(0,i.kt)("p",null,"Let's go over the structure that all server-communicating brainCloud Blueprint nodes use."),(0,i.kt)("p",null,(0,i.kt)("img",{src:n(64114).Z,width:"615",height:"387"})),(0,i.kt)("p",null,"This is a Latent node, meaning it has execution paths that are delayed. \xa0There are\xa0",(0,i.kt)("strong",{parentName:"p"},"three")," execution pins:"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"Immediate")," - Executes immediately, continuing the execution path that triggered the node"),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"On Success")," - Executes when a\xa0",(0,i.kt)("strong",{parentName:"li"},"successful")," response is received"),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("strong",{parentName:"li"},"On Failure")," -\xa0Executes when an ",(0,i.kt)("strong",{parentName:"li"},"unsuccessful")," response is received and the call has failed")),(0,i.kt)("p",null,"The next return parameter\xa0",(0,i.kt)("strong",{parentName:"p"},"Json Data")," is a JSON-formatted string. \xa0The return of this is conditional on the success or failure of the call, returning either the data specified by the API call made ",(0,i.kt)("strong",{parentName:"p"},"or")," the error information.\xa0We will get\xa0into parsing this string later in the tutorial."),(0,i.kt)("p",null,"Finally, there is the\xa0",(0,i.kt)("strong",{parentName:"p"},"Additional Data")," struct. This contains extra information that may be useful depending on the situation. It contains:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Service Name")," - The name of the service the API call belongs to"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Service Operation")," - The specific operation performed by the API call"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Status Code")," - The status code returned by the call."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Reason Code")," - The reason code describes specific failures and is returned when an error is encountered. You can view the various reason codes ",(0,i.kt)("a",{parentName:"li",href:"/api/appendix/reasoncodes"},"here"),".")),(0,i.kt)("p",null,"All brainCloud API calls that communicate with the brainCloud server will have this return structure."),(0,i.kt)("h3",{id:"authentication"},"Authentication"),(0,i.kt)("p",null,"Authentication is the next step and is required before calling any other brainCloud APIs. \xa0Create a new ",(0,i.kt)("a",{parentName:"p",href:"/api/capi/authentication/authenticateuniversal"},"Authenticate Universal")," node, which can be found under BrainCloud > Authentication."),(0,i.kt)("p",null,"By now you should have these\xa0nodes set up and connected in order:"),(0,i.kt)("p",null,(0,i.kt)("a",{target:"_blank",href:n(12117).Z},(0,i.kt)("img",{src:n(29591).Z,width:"792",height:"359"}))),(0,i.kt)("p",null,"Next, we will add some debug log messages to get a feel for how the different execution paths function."),(0,i.kt)("p",null,(0,i.kt)("a",{target:"_blank",href:n(52861).Z},(0,i.kt)("img",{src:n(15379).Z,width:"615",height:"387"}))),(0,i.kt)("p",null,"The first execution pin\xa0fires\xa0",(0,i.kt)("strong",{parentName:"p"},"immediately"),', continuing the execution path that triggered the Authenticate node in the first place. \xa0This makes it suitable for printing the "Authenticating..." message.'),(0,i.kt)("p",null,"The next execution pin,\xa0",(0,i.kt)("strong",{parentName:"p"},"On Success"),', will fire when a successful result is returned from the server, so we print the "Authentication Success!" message.'),(0,i.kt)("p",null,"Finally, the\xa0",(0,i.kt)("strong",{parentName:"p"},"On Failure"),' execution pin will fire if an error is encountered, so we print the "Authentication Failed!" message.'),(0,i.kt)("p",null,'At this point, you should be able to compile your Blueprint, run it, and see the\xa0"Authenticating..." and\xa0"Authentication Success!" messages. \xa0If not, review the steps again and check the ',(0,i.kt)("strong",{parentName:"p"},"Output Log")," to debug your Blueprint."),(0,i.kt)("h3",{id:"calling-the-api"},"Calling the API"),(0,i.kt)("p",null,"Once we've successfully authenticated let's call a few more API functions."),(0,i.kt)("p",null,(0,i.kt)("a",{target:"_blank",href:n(55147).Z},(0,i.kt)("img",{alt:"unreal_nodes",src:n(79636).Z,width:"917",height:"380"}))),(0,i.kt)("p",null,"Continuing off the\xa0",(0,i.kt)("strong",{parentName:"p"},"On Success")," path of our authentication node we've added an Update Player Name node (BrainCloud > Player State) and a Get Achievements\xa0node (BrainCloud > Gamification)."),(0,i.kt)("p",null,"Note that we are using the first execution pin, \xa0which\xa0we learned earlier\xa0will execute\xa0",(0,i.kt)("strong",{parentName:"p"},"immediately,")," so we\xa0are not waiting for the Update Player Name to succeed or fail before calling Get Achievements. \xa0These operations do not depend on one another, so there is no issue with triggering\xa0them both at the same time."),(0,i.kt)("p",null,"We've also implemented a generic\xa0",(0,i.kt)("strong",{parentName:"p"},"Handle Error"),"\xa0function and connected it to the\xa0",(0,i.kt)("strong",{parentName:"p"},"On Error")," pins of both functions. \xa0This way we can handle either error without duplicate code."),(0,i.kt)("p",null,(0,i.kt)("a",{target:"_blank",href:n(63).Z},(0,i.kt)("img",{alt:"unreal_error",src:n(42475).Z,width:"933",height:"264"}))),(0,i.kt)("p",null,"You can see inside our\xa0",(0,i.kt)("strong",{parentName:"p"},"Handle Error")," function that we use the ",(0,i.kt)("strong",{parentName:"p"},"Service Name")," and ",(0,i.kt)("strong",{parentName:"p"},"Service Operation")," of the additional return data to output an error log that specifies what call has failed."),(0,i.kt)("h3",{id:"json-parsing-in-blueprint"},"JSON Parsing in Blueprint"),(0,i.kt)("p",null,"Parsing the\xa0",(0,i.kt)("strong",{parentName:"p"},"Json Data")," string is essential to using brainCloud and\xa0it requires the use of a third-party plugin. \xa0There are several options available (we leave that up to you to decide) but for this tutorial we will be using the\xa0",(0,i.kt)("strong",{parentName:"p"},"VaRest")," plugin available ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/ufna/VaRest"},"here"),"."),(0,i.kt)("p",null,"First, we will need to make another API call to parse the return from, in this case, ",(0,i.kt)("a",{parentName:"p",href:"/api/capi/time/readservertime"},"ReadServerTime"),"\xa0which will return the current server time (BrainCloud > Time). \xa0We can see the JSON return structure on the documentation page so we know what we will be looking for when we parse the JSON."),(0,i.kt)("p",null,(0,i.kt)("a",{target:"_blank",href:n(84068).Z},(0,i.kt)("img",{alt:"unreal_json_read",src:n(88617).Z,width:"736",height:"413"}))),(0,i.kt)("p",null,"You can see here that On Success we are doing two things, constructing a new Json\xa0Object (a VaRest type) and decoding the Json Data response into it."),(0,i.kt)("p",null,"Constructing the Json\xa0Object is done by calling the ",(0,i.kt)("strong",{parentName:"p"},"Construct Json Object")," function in VaRest. \xa0Next we save the constructed object to a Local Variable using that variable's ",(0,i.kt)("strong",{parentName:"p"},"Set"),"."),(0,i.kt)("p",null,"Now we will decode the JSON, which is simply a call to the VaRest function ",(0,i.kt)("strong",{parentName:"p"},"Decode Json"),". \xa0We pass in our newly created Json Object as well as our ",(0,i.kt)("strong",{parentName:"p"},"Json Data")," string."),(0,i.kt)("p",null,(0,i.kt)("a",{target:"_blank",href:n(11674).Z},(0,i.kt)("img",{alt:"unreal_json_parse",src:n(44924).Z,width:"933",height:"492"}))),(0,i.kt)("p",null,"The next step is to check if the Decode Json call was successful by branching off of its Return Value boolean. If it was, we now want to dig through the data and print the current server time."),(0,i.kt)("p",null,"Referring to the JSON return structure in the ",(0,i.kt)("a",{parentName:"p",href:"/api/capi/time/readservertime"},"documentation"),"\xa0we can see that the server time is represented by the key ",(0,i.kt)("strong",{parentName:"p"},'"server_time"')," which is contained in the object ",(0,i.kt)("strong",{parentName:"p"},'"data"'),". \xa0So to get to it we take the Json Data object we saved to a variable and use the VaRest functions ",(0,i.kt)("strong",{parentName:"p"},"Get Object Field")," and then ",(0,i.kt)("strong",{parentName:"p"},"Get Number Field"),', passing in "data" and "server_time" as our Field Names.'),(0,i.kt)("p",null,"Lastly, we do a conversion from a float to a string and print the result."))}c.isMDXComponent=!0},52861:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/files/node-5-cca328b0c35cce61a312c40585a8bee2.jpg"},12117:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/files/unreal-initialize-authenticate-2-a3cd2083ffdbc388b4f12056a3a3ffc4.jpg"},63:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/files/unreal_error-1858c549c9f9825aab908af245d0f29f.png"},11674:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/files/unreal_json_parse-7b1b7cba399aea5c3877848d1cdb291f.png"},84068:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/files/unreal_json_read-b91fc0a45fd5da157aca3035d29a2672.png"},55147:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/files/unreal_nodes-401bedc64e313b59ec8f2a87eb1c4a35.png"},78907:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/callback-ee39080b1aacd4bab65ee20de5bb041a.jpg"},18965:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/log-1-52e6ed5f002b102e5ead9eebc558addf.jpg"},64114:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/node-4-cca328b0c35cce61a312c40585a8bee2.jpg"},15379:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/node-5-cca328b0c35cce61a312c40585a8bee2.jpg"},29591:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/unreal-initialize-authenticate-2-a3cd2083ffdbc388b4f12056a3a3ffc4.jpg"},52768:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/unreal-initialize-authenticate-a3cd2083ffdbc388b4f12056a3a3ffc4.jpg"},42475:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/unreal_error-1858c549c9f9825aab908af245d0f29f.png"},44924:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/unreal_json_parse-7b1b7cba399aea5c3877848d1cdb291f.png"},88617:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/unreal_json_read-b91fc0a45fd5da157aca3035d29a2672.png"},79636:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/unreal_nodes-401bedc64e313b59ec8f2a87eb1c4a35.png"}}]);