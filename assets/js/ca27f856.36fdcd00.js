"use strict";(self.webpackChunkdocusauruns_ts=self.webpackChunkdocusauruns_ts||[]).push([[11483],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>y});var a=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=c(n),m=r,y=u["".concat(l,".").concat(m)]||u[m]||d[m]||i;return n?a.createElement(y,o(o({ref:t},p),{},{components:n})):a.createElement(y,o({ref:t},p))}));function y(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:r,o[1]=s;for(var c=2;c<i;c++)o[c]=n[c];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},63157:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>b,frontMatter:()=>i,metadata:()=>s,toc:()=>c});var a=n(87462),r=(n(67294),n(3905));const i={},o="GetEntityPage",s={unversionedId:"api/capi/customentity/getentitypage",id:"api/capi/customentity/getentitypage",title:"GetEntityPage",description:"Overview",source:"@site/docs/api/2_capi/customentity/getentitypage.md",sourceDirName:"api/2_capi/customentity",slug:"/api/capi/customentity/getentitypage",permalink:"/braincloud-apiref/api/capi/customentity/getentitypage",draft:!1,editUrl:"https://github.com/getbraincloud/braincloud-apiref/tree/main/docs/api/2_capi/customentity/getentitypage.md",tags:[],version:"current",lastUpdatedBy:"jasonl",lastUpdatedAt:1671809255,formattedLastUpdatedAt:"Dec 23, 2022",frontMatter:{},sidebar:"apiSidebar",previous:{title:"GetCount",permalink:"/braincloud-apiref/api/capi/customentity/getcount"},next:{title:"GetEntityPageOffset",permalink:"/braincloud-apiref/api/capi/customentity/getentitypageoffset"}},l={},c=[{value:"Overview",id:"overview",level:2},{value:"Usage",id:"usage",level:2},{value:"Method Parameters",id:"method-parameters",level:2}],p=e=>function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)},u=p("PartialServop"),d=p("BrowserWindow"),m=p("Tabs"),y=p("TabItem"),g={toc:c};function b(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},g,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"getentitypage"},"GetEntityPage"),(0,r.kt)("h2",{id:"overview"},"Overview"),(0,r.kt)("p",null,"Retrieves the first page of custom entities from the server based on the custom entity type and specified query context."),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"Note that for collections with > 1,000 records, it is recommended that ",(0,r.kt)("inlineCode",{parentName:"em"},"doCount")," be set to false for better performance.")),(0,r.kt)("p",null,"Example context object:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{\n  "pagination": {\n    "rowsPerPage": 50,\n    "pageNumber": 1,\n    "doCount": false\n  },\n  "searchCriteria": {\n    "data.position": "defense"\n  },\n  "sortCriteria": {\n  }\n}\n')),(0,r.kt)("admonition",{type:"caution"},(0,r.kt)("p",{parentName:"admonition"},"Note that one has to be careful when using ",(0,r.kt)("code",null,"GetEntityPage()")," with ",(0,r.kt)("em",null,"owned")," entities.")),(0,r.kt)("p",null,"The system's behaviour will vary depending upon the setting of the new compatibility flag:"),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"[ ]"," Include shared objects in Owned Custom Entity GetEntityPage queries (warning: can be slow). Can be overwritten by specifying 'ownedOnly' in query context 'options'.")),(0,r.kt)("p",null,"If the flag is enabled (i.e. checked), the system will look for all objects that match the search criteria that:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"are ",(0,r.kt)("em",{parentName:"li"},"owned")," by the user, and..."),(0,r.kt)("li",{parentName:"ul"},"are ",(0,r.kt)("strong",{parentName:"li"},"accessible by the user")," (i.e. ",(0,r.kt)("inlineCode",{parentName:"li"},"acl.other")," is not 0)")),(0,r.kt)("p",null,"That second part of the search criteria is a waste if you are ",(0,r.kt)("em",{parentName:"p"},"only")," looking for objects ",(0,r.kt)("em",{parentName:"p"},"owned")," by the user - which is normally the case.  (",(0,r.kt)("em",{parentName:"p"},"It can also be very slow and CPU intensive if the search query is too broad in that context."),")"),(0,r.kt)("p",null,"For this reason, it is highly recommended that all apps un-check this compatibility flag - so that the default query syntax is as efficient as possible, by focusing on objects ",(0,r.kt)("em",{parentName:"p"},"owned")," by the user ",(0,r.kt)("em",{parentName:"p"},"only"),"."),(0,r.kt)("p",null,"Once un-checked, it is still possible to search for shared entities (i.e. entities whose ",(0,r.kt)("inlineCode",{parentName:"p"},"acl.other")," is not 0) by including a special ",(0,r.kt)("inlineCode",{parentName:"p"},"ownedOnly")," option in the query:"),(0,r.kt)("p",null,"Example context object with ",(0,r.kt)("inlineCode",{parentName:"p"},"ownedOnly")," option:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'{\n  "pagination": {\n    "rowsPerPage": 50,\n    "pageNumber": 1,\n    "doCount": false\n  },\n  "searchCriteria": {\n    "data.position": "defense"\n  },\n  "sortCriteria": {\n  },\n  "options": {\n    "ownedOnly": false\n  }\n}\n')),(0,r.kt)("admonition",{type:"info"},(0,r.kt)("p",{parentName:"admonition"},"In all cases, having proper custom indexes defined for your queries is essential for best performance. Developers are encouraged to contact support to have our team examine your entities and indexes before significant launches / feature releases. We are happy to help! ")),(0,r.kt)(u,{service_name:"customEntity",operation_name:"GET_ENTITY_PAGE",mdxType:"PartialServop"}),(0,r.kt)("h2",{id:"usage"},"Usage"),(0,r.kt)(d,{mdxType:"BrowserWindow"},(0,r.kt)(m,{mdxType:"Tabs"},(0,r.kt)(y,{value:"csharp",label:"C#",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-csharp"},'string entityType = "athletes";\nstring context = "{\\"pagination\\":{\\"rowsPerPage\\":50,\\"pageNumber\\":1},\\"searchCriteria\\":{\\"data.position\\":\\"defense\\"},\\"sortCriteria\\":{\\"createdAt\\":1,\\"updatedAt\\":-1}}";\n\nSuccessCallback successCallback = (response, cbObject) =>\n{\n    Debug.Log(string.Format("Success | {0}", response));\n};\nFailureCallback failureCallback = (status, code, error, cbObject) =>\n{\n    Debug.Log(string.Format("Failed | {0}  {1}  {2}", status, code, error));\n};\n\n_bc.CustomEntityService.GetEntityPage(entityType, context, successCallback, failureCallback);\n'))),(0,r.kt)(y,{value:"cpp",label:"C++",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-cpp"},'const char *entityType = "athletes";\nconst char *context = "{\\"pagination\\":{\\"rowsPerPage\\":50,\\"pageNumber\\":1},\\"searchCriteria\\":{\\"data.position\\":\\"defense\\"},\\"sortCriteria\\":{\\"createdAt\\":1,\\"updatedAt\\":-1}}";\n\n_bc->getCustomEntityService()->getEntityPage(entityType, context, this);\n'))),(0,r.kt)(y,{value:"objectivec",label:"Objective-C",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-objectivec"},'NSString *entityType = @"athletes";\nNSString *context = @"{\\"pagination\\":{\\"rowsPerPage\\":50,\\"pageNumber\\":1},\\"searchCriteria\\":{\\"data.position\\":\\"defense\\"},\\"sortCriteria\\":{\\"createdAt\\":1,\\"updatedAt\\":-1}}";\n\nBCCompletionBlock successBlock;      // define callback\nBCErrorCompletionBlock failureBlock; // define callback\n\n[[_bc customEntityService] getEntityPage:entityType\n                    context:context\n            completionBlock:successBlock\n       errorCompletionBlock:failureBlock\n                   cbObject:nil];\n'))),(0,r.kt)(y,{value:"java",label:"Java",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-java"},'String entityType = "athletes";\nString context = "{\\"pagination\\":{\\"rowsPerPage\\":50,\\"pageNumber\\":1},\\"searchCriteria\\":{\\"data.position\\":\\"defense\\"},\\"sortCriteria\\":{\\"createdAt\\":1,\\"updatedAt\\":-1}}";\nthis; // implements IServerCallback\n\n_bc.getCustomEntityService().getEntityPage(entityType, context, this);\n\npublic void serverCallback(ServiceName serviceName, ServiceOperation serviceOperation, JSONObject jsonData)\n{\n    System.out.print(String.format("Success | %s", jsonData.toString()));\n}\npublic void serverError(ServiceName serviceName, ServiceOperation serviceOperation, int statusCode, int reasonCode, String jsonError)\n{\n    System.out.print(String.format("Failed | %d %d %s", statusCode,  reasonCode, jsonError.toString()));\n}\n'))),(0,r.kt)(y,{value:"js",label:"JavaScript",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'var entityType = "athletes";\nvar context = {\n    "pagination": {\n        "rowsPerPage": 50,\n        "pageNumber": 1\n    },\n    "searchCriteria": {\n        "data.position": "defense"\n    },\n    "sortCriteria": {\n        "createdAt": 1,\n        "updatedAt": -1\n    }\n};\n\n_bc.customEntity.getEntityPage(entityType, context, result =>\n{\n    var status = result.status;\n    console.log(status + " : " + JSON.stringify(result, null, 2));\n});\n'))),(0,r.kt)(y,{value:"cfs",label:"Cloud Code",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-cfscript"},'var entityType = "athletes";\nvar context = {\n  "pagination": {\n    "rowsPerPage": 50,\n    "pageNumber": 1\n  },\n  "searchCriteria": {\n    "data.position": "defense"\n  },\n  "sortCriteria": {\n    "createdAt": 1\n  }\n};\n\nvar customEntityProxy = bridge.getCustomEntityServiceProxy();\n\nvar postResult = customEntityProxy.getEntityPage(entityType, context);\nif (postResult.status == 200) {\n    // Success!\n}\n'))),(0,r.kt)(y,{value:"r",label:"Raw",mdxType:"TabItem"},(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-r"},'{\n    "service": "customEntity",\n    "operation": "GET_ENTITY_PAGE",\n    "data": {\n        "entityType": "athletes",\n        "context": {\n            "pagination": {\n                "rowsPerPage": 50,\n                "pageNumber": 1\n            },\n            "searchCriteria": {\n                "data.position": "defense"\n            },\n            "sortCriteria": {\n                "createdAt": 1,\n                "updatedAt": -1\n            }\n        }\n  }\n}\n'))))),(0,r.kt)("details",null,(0,r.kt)("summary",null,"JSON Response"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "status": 200,\n  "data": {\n    "_serverTime": 1637946319239,\n    "context": "lciI6MSwiZG9Db3VudCI6dHJ...",\n    "results": {\n      "count": 4,\n      "page": 1,\n      "items": [\n        {\n          "entityId": "f9d91cda-3ece-447c-bf81-046fa026520c",\n          "version": 1,\n          "acl": {\n            "other": 1\n          },\n          "ownerId": null,\n          "expiresAt": null,\n          "timeToLive": null,\n          "createdAt": 1573537595505,\n          "updatedAt": 1573537595505,\n          "data": {\n            "firstName": "Super",\n            "surName": "Star",\n            "position": "defense",\n            "goals": 2,\n            "assists": 4\n          }\n        },\n        {\n          "entityId": "1497cc7e-66cb-4682-9eac-c755523369a8",\n          "version": 3,\n          "acl": {\n            "other": 1\n          },\n          "ownerId": null,\n          "expiresAt": null,\n          "timeToLive": null,\n          "createdAt": 1573540122600,\n          "updatedAt": 1573540445332,\n          "data": {\n            "firstName": "Super",\n            "surName": "Star2",\n            "position": "defense",\n            "goals": 3,\n            "assists": 5\n          }\n        }\n      ],\n      "moreAfter": true,\n      "moreBefore": false\n    }\n  }\n}\n'))),(0,r.kt)("h2",{id:"method-parameters"},"Method Parameters"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Parameter"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"entityType"),(0,r.kt)("td",{parentName:"tr",align:null},"The type of custom entity being retrieved.")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"context"),(0,r.kt)("td",{parentName:"tr",align:null},"A context object describing the desired paging behaviour")))))}b.isMDXComponent=!0}}]);