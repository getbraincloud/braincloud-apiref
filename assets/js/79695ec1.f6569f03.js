"use strict";(self.webpackChunkdocusauruns_ts=self.webpackChunkdocusauruns_ts||[]).push([[28036],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>h});var n=a(67294);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},u=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,r=e.originalType,s=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),d=p(a),c=i,h=d["".concat(s,".").concat(c)]||d[c]||m[c]||r;return a?n.createElement(h,l(l({ref:t},u),{},{components:a})):n.createElement(h,l({ref:t},u))}));function h(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=a.length,l=new Array(r);l[0]=c;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[d]="string"==typeof e?e:i,l[1]=o;for(var p=2;p<r;p++)l[p]=a[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}c.displayName="MDXCreateElement"},80026:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>d,frontMatter:()=>r,metadata:()=>o,toc:()=>p});var n=a(87462),i=(a(67294),a(3905));const r={title:"Email Integration - SendGrid",date:"2016-10-26"},l=void 0,o={unversionedId:"learn/portal-tutorials/email-integration-sendgrid/index",id:"learn/portal-tutorials/email-integration-sendgrid/index",title:"Email Integration - SendGrid",description:"Background",source:"@site/docs/learn/5_portal-tutorials/9_email-integration-sendgrid/index.md",sourceDirName:"learn/5_portal-tutorials/9_email-integration-sendgrid",slug:"/learn/portal-tutorials/email-integration-sendgrid/",permalink:"/braincloud-apiref/learn/portal-tutorials/email-integration-sendgrid/",draft:!1,editUrl:"https://github.com/getbraincloud/braincloud-apiref/tree/main/docs/learn/5_portal-tutorials/9_email-integration-sendgrid/index.md",tags:[],version:"current",lastUpdatedBy:"jasonl",lastUpdatedAt:1672679892,formattedLastUpdatedAt:"Jan 2, 2023",frontMatter:{title:"Email Integration - SendGrid",date:"2016-10-26"},sidebar:"learnSidebar",previous:{title:"Making S2S API Calls from PostMan",permalink:"/braincloud-apiref/learn/portal-tutorials/using-postman-with-s2s/"},next:{title:"Authentication - Apple",permalink:"/braincloud-apiref/learn/portal-tutorials/authentication-apple/"}},s={},p=[{value:"Background",id:"background",level:2},{value:"Setup",id:"setup",level:2},{value:"Step 1 - Create a SendGrid account",id:"step-1---create-a-sendgrid-account",level:3},{value:"Step 2 - Create a\xa0SendGrid\xa0API Key",id:"step-2---create-asendgridapi-key",level:3},{value:"Step 3 - Configure the SendGrid Integration in brainCloud",id:"step-3---configure-the-sendgrid-integration-in-braincloud",level:3},{value:"Step 4 - Enable\xa0Email\xa0Verification",id:"step-4---enableemailverification",level:3},{value:"Step 5 -\xa0Create SendGrid Templates",id:"step-5--create-sendgrid-templates",level:3},{value:"Step 6\xa0- Configure the Rich Templates in brainCloud",id:"step-6--configure-the-rich-templates-in-braincloud",level:3},{value:"Step 7\xa0- Optional Send email from your app!",id:"step-7--optional-send-email-from-your-app",level:3}],u={toc:p};function d(e){let{components:t,...r}=e;return(0,i.kt)("wrapper",(0,n.Z)({},u,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"background"},"Background"),(0,i.kt)("p",null,"brainCloud 3.1 introduced SendGrid transaction email integration. By integrating brainCloud with their own SendGrid account, app developers can:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Utilize SendGrid for all Email Authentication-related emails (validation, reset password, etc.)"),(0,i.kt)("li",{parentName:"ul"},"Customize the brainCloud-generated emails using SendGrids template feature"),(0,i.kt)("li",{parentName:"ul"},"Send emails to users via the new brainCloud Mail API")),(0,i.kt)("h2",{id:"setup"},"Setup"),(0,i.kt)("p",null,"The following sections will guide you through the process of integrating SendGrid with brainCloud."),(0,i.kt)("h3",{id:"step-1---create-a-sendgrid-account"},"Step 1 - Create a SendGrid account"),(0,i.kt)("p",null,"If you haven't already, go to ",(0,i.kt)("a",{parentName:"p",href:"https://app.sendgrid.com/signup?id=8b9ae93b-ce8a-11e4-b4e5-5fcde71ee009"},"http://sendgrid.com")," and create an account. \xa0SendGrid offers free accounts that allow you to send up to 12,000 emails per month."),(0,i.kt)("h3",{id:"step-2---create-asendgridapi-key"},"Step 2 - Create a\xa0SendGrid\xa0API Key"),(0,i.kt)("p",null,"Note - it can take a few hours for SendGrid to provision your new account - during which time you will be unable to access your SendGrid application ID."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Log into ",(0,i.kt)("strong",{parentName:"li"},"SendGrid.")),(0,i.kt)("li",{parentName:"ul"},"Choose the ",(0,i.kt)("strong",{parentName:"li"},"Settings | API Keys")," page from the left-hand menu."),(0,i.kt)("li",{parentName:"ul"},"Click on ",(0,i.kt)("strong",{parentName:"li"},"[Create API Key]")," in the top-right - choosing the ",(0,i.kt)("em",{parentName:"li"},"General API Key")," option."),(0,i.kt)("li",{parentName:"ul"},"Give the key a ",(0,i.kt)("strong",{parentName:"li"},"Name"),' - for example, "brainCloud app".'),(0,i.kt)("li",{parentName:"ul"},"Configure the ",(0,i.kt)("strong",{parentName:"li"},"Permissions")," for the API key.",(0,i.kt)("br",{parentName:"li"}),"SendGrid's documentation isn't great in this area. We normally recommend giving your API Key the following minimal permissions:",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Mail Send - Full Access"),(0,i.kt)("li",{parentName:"ul"},"Email Activity - Read Access"),(0,i.kt)("li",{parentName:"ul"},"Suppressions - Full Access"),(0,i.kt)("li",{parentName:"ul"},"Whitelabel - Full Access"),(0,i.kt)("li",{parentName:"ul"},"Template Engine - Full Access"),(0,i.kt)("li",{parentName:"ul"},"Inbound Parse - Full Access (for future use - spoiler!)"),(0,i.kt)("li",{parentName:"ul"},"Marketing Campaigns - Full Access (future use)"))),(0,i.kt)("li",{parentName:"ul"},"Hit ",(0,i.kt)("strong",{parentName:"li"},"[Save]"),", and copy the API Key into your clipboard or a document for safe keeping.")),(0,i.kt)("p",null,(0,i.kt)("a",{target:"_blank",href:a(67028).Z},(0,i.kt)("img",{alt:"2016-10-26_13-57-29",src:a(53339).Z,width:"674",height:"749"}))),(0,i.kt)("h3",{id:"step-3---configure-the-sendgrid-integration-in-braincloud"},"Step 3 - Configure the SendGrid Integration in brainCloud"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Log into the brainCloud Portal."),(0,i.kt)("li",{parentName:"ul"},"Go to ",(0,i.kt)("strong",{parentName:"li"},"Design | Integrations | Manage Integrations"),", and scroll down to the SendGrid integration."),(0,i.kt)("li",{parentName:"ul"},"Click ",(0,i.kt)("strong",{parentName:"li"},"[x]"," Enable SendGrid Integration"),", and enter the ",(0,i.kt)("em",{parentName:"li"},"SendGrid API Key")," that you created in Step 2."),(0,i.kt)("li",{parentName:"ul"},"Enter in a ",(0,i.kt)("em",{parentName:"li"},"Default From Address")," (email) and ",(0,i.kt)("em",{parentName:"li"},"Default From Name"),"\xa0to use in emails sent from your app. \xa0You can optionally fill in the Reply-To fields as well."),(0,i.kt)("li",{parentName:"ul"},"Click the ",(0,i.kt)("strong",{parentName:"li"},"[Test]")," button to validate that everything is hooked up properly. brainCloud should send a test email to the email address that you've used to log into the portal."),(0,i.kt)("li",{parentName:"ul"},"Once you've confirmed that the email was sent, click the ",(0,i.kt)("strong",{parentName:"li"},"[Save]")," button to save the configuration and activate the SendGrid integration.")),(0,i.kt)("p",null,(0,i.kt)("a",{target:"_blank",href:a(92755).Z},(0,i.kt)("img",{alt:"SendGrid Integration",src:a(37518).Z,width:"985",height:"595"}))),(0,i.kt)("h3",{id:"step-4---enableemailverification"},"Step 4 - Enable\xa0Email\xa0Verification"),(0,i.kt)("p",null,"If your app is using Email Authentication, and you'd like to validate the user's email when they create an account, you can do so using our Email Authentication service."),(0,i.kt)("p",null,"Enabling verification using plain text emails is quick and simple:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Go to ",(0,i.kt)("strong",{parentName:"li"},"Design | Authentication | Email Authentication")," in the portal."),(0,i.kt)("li",{parentName:"ul"},"Click\xa0",(0,i.kt)("strong",{parentName:"li"},"[x]"," Send Verification Email Using Sendgrid")," to enable sending a verification email to users that create new accounts using their email identity. The email sent to them will contain a link to click to confirm their email address."),(0,i.kt)("li",{parentName:"ul"},"Enable\xa0",(0,i.kt)("strong",{parentName:"li"},"[x]"," Reject Unverified Email Login"),"s to prevent users from logging into their app until they have clicked the link."),(0,i.kt)("li",{parentName:"ul"},"Enable ",(0,i.kt)("strong",{parentName:"li"},"[x]"," Send Confirmation Email"),' to send a final confirmation to the user after they have clicked the link, and successfully signed up to your app. This is a useful time to welcome them to your app, and also helps your email "bounce" ratio (which you have to watch so that your email endpoint doesn\'t get mistaken\xa0for a spam account).')),(0,i.kt)("p",null,"Then confirm your email templates:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"For now, we assume that you have selected ",(0,i.kt)("strong",{parentName:"li"},"(x) Use Simple Plain Text")," emails."),(0,i.kt)("li",{parentName:"ul"},"Customize the contents of the email templates. Use the Template combo-box to cycle between the different templates. Click on the ","[+ Add Language]"," button on the bottom to add additional languages."),(0,i.kt)("li",{parentName:"ul"},"Click ","[Test]"," to test individual templates."),(0,i.kt)("li",{parentName:"ul"},"Click\xa0","[Save]","\xa0when you are happy with your changes.")),(0,i.kt)("p",null,(0,i.kt)("a",{target:"_blank",href:a(29275).Z},(0,i.kt)("img",{alt:"2016-10-26_14-24-13",src:a(32644).Z,width:"779",height:"669"}))),(0,i.kt)("h3",{id:"step-5--create-sendgrid-templates"},"Step 5 -\xa0Create SendGrid Templates"),(0,i.kt)("p",null,"The real power of integrating with SendGrid lies in using custom, professional templates in your app."),(0,i.kt)("p",null,"We won't go through all the\xa0ins and outs of creating templates in SendGrid, but we'll take you through the basics:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Log into SendGrid"),(0,i.kt)("li",{parentName:"ul"},"Choose the ",(0,i.kt)("strong",{parentName:"li"},"Templates | Transactional")," feature from the left-hand menu"),(0,i.kt)("li",{parentName:"ul"},"Click ",(0,i.kt)("strong",{parentName:"li"},"[Create Template]")),(0,i.kt)("li",{parentName:"ul"},"Enter a ",(0,i.kt)("strong",{parentName:"li"},"Name"),' for the template - for example, "brainCloud Email Verification"'),(0,i.kt)("li",{parentName:"ul"},"Now choose ",(0,i.kt)("strong",{parentName:"li"},"+"," Add Version")," from the ",(0,i.kt)("strong",{parentName:"li"},"Actions")," menu."),(0,i.kt)("li",{parentName:"ul"},"Enter a ",(0,i.kt)("strong",{parentName:"li"},"Version Name")," in the ",(0,i.kt)("em",{parentName:"li"},"Template Name"),' field of\xa0the left-hand menu. I would suggest "VerifyV1".',(0,i.kt)("br",{parentName:"li"}),"",(0,i.kt)("em",{parentName:"li"},"[Note - this terminology from SendGrid is confusing, and they seem to use it inconsistently. The basics are that a template can have multiple versions, only one of which will be active.]")),(0,i.kt)("li",{parentName:"ul"},"Edit\xa0the ",(0,i.kt)("strong",{parentName:"li"},"Email\xa0Subject"),"\xa0-\xa0you should identify your app and the purpose of the email"),(0,i.kt)("li",{parentName:"ul"},"Use the editor to ",(0,i.kt)("strong",{parentName:"li"},"create your template"),". \xa0You could use some variation of the\xa0text below."),(0,i.kt)("li",{parentName:"ul"},'You\'ll need to use a substitution parameter to ensure that the web-url gets placed in your email. The valid parameters are listed at the bottom of this page. \xa0For now, add "-weburl-" to the bottom of the page.'),(0,i.kt)("li",{parentName:"ul"},"Click ",(0,i.kt)("strong",{parentName:"li"},"[Save]")," to save the template, and then the ",(0,i.kt)("strong",{parentName:"li"},"left-arrow")," on the left-hand side of the screen to exit the editor."),(0,i.kt)("li",{parentName:"ul"},"In the templates list screen, click on the ",(0,i.kt)("strong",{parentName:"li"},"action button")," of the template version, and choose ",(0,i.kt)("strong",{parentName:"li"},"[Preview & Test]"),". Then click ",(0,i.kt)("strong",{parentName:"li"},"[Send Test]",",")," and then ",(0,i.kt)("strong",{parentName:"li"},"[Send]")," to send yourself a raw test email (without substitution). Click ",(0,i.kt)("strong",{parentName:"li"},"[Cancel]")," to exit the screen.")),(0,i.kt)("p",null,(0,i.kt)("a",{target:"_blank",href:a(50343).Z},(0,i.kt)("img",{alt:"verify_email_template",src:a(34736).Z,width:"1176",height:"502"}))),(0,i.kt)("p",null,"While you're at it, you should create the templates for the ",(0,i.kt)("em",{parentName:"p"},"Reset Password")," and ",(0,i.kt)("em",{parentName:"p"},"Confirmation")," emails as well. When configuring Rich Templates for email authentication, you must configure all templates for a language at the same time."),(0,i.kt)("p",null,"Suggested text for ",(0,i.kt)("em",{parentName:"p"},"Reset Password")," is:"),(0,i.kt)("p",null,"Hi,"),(0,i.kt)("p",null,"This e-mail has been sent automatically by AwesomeApp3 based on your request to reset your forgotten password."),(0,i.kt)("p",null,"To reset your password please click on the link below (or copy and paste the link into your browser) and then enter your new password."),(0,i.kt)("p",null,"If you did not forget your password, please ignore this e-mail."),(0,i.kt)("p",null,"{{webUrl}}"),(0,i.kt)("p",null,"For the confirmation app, the suggested text is totally up to you. Just thank them for registering for your app, and tell them where to get more info!"),(0,i.kt)("h3",{id:"step-6--configure-the-rich-templates-in-braincloud"},"Step 6\xa0- Configure the Rich Templates in brainCloud"),(0,i.kt)("p",null,"Now that we've created our SendGrid templates, let's hook them up."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Go to ",(0,i.kt)("strong",{parentName:"li"},"Design | Authentication | Email Authentication")," in the brainCloud Portal"),(0,i.kt)("li",{parentName:"ul"},"Select ",(0,i.kt)("strong",{parentName:"li"},"(x) Use rich email service templates")),(0,i.kt)("li",{parentName:"ul"},"Go to the ",(0,i.kt)("em",{parentName:"li"},"Verification Email")," combo box, and choose the appropriate template from the list. Click ",(0,i.kt)("strong",{parentName:"li"},"[Test]")," to send yourself a test email."),(0,i.kt)("li",{parentName:"ul"},"Do the same for the ",(0,i.kt)("em",{parentName:"li"},"Password Reset")," and ",(0,i.kt)("em",{parentName:"li"},"Verification Confirmation")," settings, and then click ",(0,i.kt)("strong",{parentName:"li"},"[Save]"))),(0,i.kt)("p",null,"Voila!\xa0You are\xa0all set!"),(0,i.kt)("h3",{id:"step-7--optional-send-email-from-your-app"},"Step 7\xa0- ","[Optional]"," Send email from your app!"),(0,i.kt)("p",null,"You can also send emails to users programmatically. Check out our new ",(0,i.kt)("a",{parentName:"p",href:"/api/capi/mail"},"Mail Service")," APIs!"))}d.isMDXComponent=!0},67028:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/files/2016-10-26_13-57-29-03a11e7705b512ec53fa842afad0bab6.png"},92755:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/files/2016-10-26_14-05-36-055763453865251589646bc80188c716.png"},29275:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/files/2016-10-26_14-24-13-298d5ec77903b47c1208a5468f8e17ef.png"},50343:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/files/2016-11-02_17-08-19-bae6318dee807f1b1311f2d15997e128.png"},53339:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/2016-10-26_13-57-29-03a11e7705b512ec53fa842afad0bab6.png"},37518:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/2016-10-26_14-05-36-055763453865251589646bc80188c716.png"},32644:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/2016-10-26_14-24-13-298d5ec77903b47c1208a5468f8e17ef.png"},34736:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/2016-11-02_17-08-19-bae6318dee807f1b1311f2d15997e128.png"}}]);