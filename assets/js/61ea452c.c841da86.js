"use strict";(self.webpackChunkdocusauruns_ts=self.webpackChunkdocusauruns_ts||[]).push([[71519],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>g});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),p=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},u=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},m="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),m=p(a),d=r,g=m["".concat(s,".").concat(d)]||m[d]||c[d]||i;return a?n.createElement(g,l(l({ref:t},u),{},{components:a})):n.createElement(g,l({ref:t},u))}));function g(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,l=new Array(i);l[0]=d;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[m]="string"==typeof e?e:r,l[1]=o;for(var p=2;p<i;p++)l[p]=a[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"},98824:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>m,frontMatter:()=>i,metadata:()=>o,toc:()=>p});var n=a(87462),r=(a(67294),a(3905));const i={title:"brainCloud Atlas migration - Feb 22-23, 2022",date:"2022-02-11",tags:["release-history"]},l=void 0,o={permalink:"/braincloud-apiref/release/2022/02/11/braincloud-atlas-migration",source:"@site/release/2022-02-11-braincloud-atlas-migration/index.md",title:"brainCloud Atlas migration - Feb 22-23, 2022",description:"Warning",date:"2022-02-11T00:00:00.000Z",formattedDate:"February 11, 2022",tags:[{label:"release-history",permalink:"/braincloud-apiref/release/tags/release-history"}],readingTime:4.975,hasTruncateMarker:!1,authors:[],frontMatter:{title:"brainCloud Atlas migration - Feb 22-23, 2022",date:"2022-02-11",tags:["release-history"]},prevItem:{title:"Release 4.10 is live!",permalink:"/braincloud-apiref/release/2022/03/23/release-4-10"},nextItem:{title:"brainCloud and log4shell (CVE-2021-44228)",permalink:"/braincloud-apiref/release/2021/12/14/braincloud-and-log4shell-cve-2021-44228"}},s={authorsImageUrls:[]},p=[{value:"Background",id:"background",level:2},{value:"Player-visible Service Impacts",id:"player-visible-service-impacts",level:2},{value:"Temporary Restrictions",id:"temporary-restrictions",level:2},{value:"Detailed Schedule",id:"detailed-schedule",level:2},{value:"FAQ (Frequenty Asked Questions)",id:"faq-frequenty-asked-questions",level:2},{value:"Why is brainCloud moving to MongoDB Atlas?",id:"why-is-braincloud-moving-to-mongodb-atlas",level:4},{value:"Will my players or developers notice any changes once the system is running on Atlas?",id:"will-my-players-or-developers-notice-any-changes-once-the-system-is-running-on-atlas",level:4},{value:"Will my players or developers notice any changes during the migration to Atlas?",id:"will-my-players-or-developers-notice-any-changes-during-the-migration-to-atlas",level:4},{value:"What if something goes massively wrong during migration?",id:"what-if-something-goes-massively-wrong-during-migration",level:4}],u={toc:p};function m(e){let{components:t,...a}=e;return(0,r.kt)("wrapper",(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Warning"),(0,r.kt)("p",null,"tl;dr Developers will be unable to ",(0,r.kt)("strong",{parentName:"p"},"deploy")," or ",(0,r.kt)("strong",{parentName:"p"},"import/export")," application changes from ",(0,r.kt)("strong",{parentName:"p"},"Feb 22, 2022")," at ",(0,r.kt)("strong",{parentName:"p"},"11am Eastern")," until ",(0,r.kt)("strong",{parentName:"p"},"Feb 23, 2022")," at ",(0,r.kt)("strong",{parentName:"p"},"11am Eastern"),".  "),(0,r.kt)("p",null,(0,r.kt)("em",{parentName:"p"},"See remainder of announcement for additional restrictions.")),(0,r.kt)("h2",{id:"background"},"Background"),(0,r.kt)("p",null,"On ",(0,r.kt)("strong",{parentName:"p"},"February 22nd")," and ",(0,r.kt)("strong",{parentName:"p"},"23rd"),", we will be migrating brainCloud's core database cluster from VM-hosted MongoDB instances to MongoDB's Atlas service."),(0,r.kt)("p",null,"This is a live migration - intended to accomplish the migration of all app and player data - with minimal service interruption."),(0,r.kt)("h2",{id:"player-visible-service-impacts"},"Player-visible Service Impacts"),(0,r.kt)("p",null,"Depending upon the features your app uses, the following service impacts may be noticeable by your players:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Lobbies and Hosted Servers delays")," - lobby processing and launching of hosted servers will experience some performance delays during the cut-over period. We hope to keep this period of reduced performance to ~10-20 minutes -- between the hours of ",(0,r.kt)("strong",{parentName:"li"},"05:00")," and ",(0,r.kt)("strong",{parentName:"li"},"07:00 Eastern")," on ",(0,r.kt)("strong",{parentName:"li"},"Feb 23, 2022"),"."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Delayed Push notifications")," - new push notification jobs started during the cut-over period may experience delays"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Scheduled Jobs")," - scheduled cloud code jobs may experience small delays during the initial cut-over period."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Stale Segments")," ","-"," The nightly ",(0,r.kt)("strong",{parentName:"li"},"Segment Refresh")," job will not run the night of ",(0,r.kt)("strong",{parentName:"li"},"Feb 22, 2022"),". This could mean that a player that newly qualifies for a segment wouldn't be considered part of it - for a segment targeted Push Notification run, for example. Note that an individual player's segments ",(0,r.kt)("strong",{parentName:"li"},"will")," still refresh when they log in -- so any Store pricing shown to players will still accurately reflect any applicable promotions.")),(0,r.kt)("h2",{id:"temporary-restrictions"},"Temporary Restrictions"),(0,r.kt)("p",null,"For data integrity reasons, ",(0,r.kt)("strong",{parentName:"p"},"we cannot allow any changes to the database schema")," (i.e. new/removed collections or indexes) during the migration period - so certain brainCloud features will be disabled. We also need to disable (i.e. temporarily remove) all TTL (Time To Live) indexes -- so certain objects will stick around past their normal expiry periods."),(0,r.kt)("p",null,"These restrictions translate to the following brainCloud limitations:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"For safety, we will also be ",(0,r.kt)("strong",{parentName:"li"},"disabling")," the ability to ",(0,r.kt)("strong",{parentName:"li"},"Deploy")," or ",(0,r.kt)("strong",{parentName:"li"},"Import/Export")," apps during the entire migration period."),(0,r.kt)("li",{parentName:"ul"},"If ",(0,r.kt)("strong",{parentName:"li"},"creating a new app")," in brainCloud, the ",(0,r.kt)("strong",{parentName:"li"},"leaderboard collection for that app will not be created")," (until after the migration period)"),(0,r.kt)("li",{parentName:"ul"},"If introducing support for leaderboards in your app for the first time, posting scores will not be supported until after the migration"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"TTL indexes")," for all core and custom collections (i.e. Custom Entities, Messages, etc.) ",(0,r.kt)("strong",{parentName:"li"},"will be removed"),". This means that some objects may stick around for up to one day later than they otherwise would"),(0,r.kt)("li",{parentName:"ul"},"Developers will ",(0,r.kt)("strong",{parentName:"li"},"not")," be able to create new ",(0,r.kt)("strong",{parentName:"li"},"Custom Entity")," collections."),(0,r.kt)("li",{parentName:"ul"},"Developers will also ",(0,r.kt)("strong",{parentName:"li"},"not")," be able to create new ",(0,r.kt)("strong",{parentName:"li"},"Indexes")," on ",(0,r.kt)("strong",{parentName:"li"},"Custom Entity")," collections"),(0,r.kt)("li",{parentName:"ul"},"If Messaging is newly enabled for an app, messages cannot be sent until after the migration")),(0,r.kt)("p",null,"Thus, the following screens in the Design Portal will be disabled during the migration period:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Design | Core App Info | Admin")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"Design | Cloud Data | Custom Entities"))),(0,r.kt)("p",null,"Also - to ease the amount of data changes to migrate, we will be disabling ",(0,r.kt)("strong",{parentName:"p"},"Segment Processing")," for the night of ",(0,r.kt)("strong",{parentName:"p"},"Feb 22nd")," only."),(0,r.kt)("h2",{id:"detailed-schedule"},"Detailed Schedule"),(0,r.kt)("p",null,"The planned schedule for the migration is as follows. Interim times are intentionally conservative. If the migration is proceeding well, some steps will happen earlier than stated here."),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Feb 22 11:00 Eastern - Start migration prep",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Notify developers (via banner) that migration is starting"),(0,r.kt)("li",{parentName:"ul"},"Disable collection creation"),(0,r.kt)("li",{parentName:"ul"},"Disable the ",(0,r.kt)("strong",{parentName:"li"},"Admin Tools")," and ",(0,r.kt)("strong",{parentName:"li"},"Custom Entities")," design screens"),(0,r.kt)("li",{parentName:"ul"},"Disable Segment Processing"),(0,r.kt)("li",{parentName:"ul"},"Prep the source database cluster (i.e. disable balancer and remove TTL indexes)"))),(0,r.kt)("li",{parentName:"ul"},"Feb 22 13:00 Eastern - Start bulk migration",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"The background bulk copy processes will begin"))),(0,r.kt)("li",{parentName:"ul"},"Feb 22 22:00 Eastern - Start sync",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"The bulk migration should be complete"),(0,r.kt)("li",{parentName:"ul"},"The system now goes into sync mode - syncing oplog changes in realtime between the old and new clusters. Note that it will take several hours for the new clusters to catch up to the latest changes being applied to the old clusters"))),(0,r.kt)("li",{parentName:"ul"},"Feb 23 04:00 Eastern - Validate data + indexes",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Validate the results of the migration. May involve rebuilding key indexes"))),(0,r.kt)("li",{parentName:"ul"},"Feb 23 06:00 Eastern - Start cut-over",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Cut-over the brainCloud servers from the old database to the new database."),(0,r.kt)("li",{parentName:"ul"},"Certain background processes will be scaled down during the cut-over. This will delay the processing of certain background tasks, like scheduled jobs, push notifications, etc. Those jobs will be processed once the servers spin back up on the new cluster."))),(0,r.kt)("li",{parentName:"ul"},"Feb 23 09:00 - Finalize migration",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Validate health of all processes"),(0,r.kt)("li",{parentName:"ul"},"Disable sync process"),(0,r.kt)("li",{parentName:"ul"},"Re-enable balancer and re-add TTL Indexes"))),(0,r.kt)("li",{parentName:"ul"},"Feb 23 11:00 - Migration complete",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Re-enable collection creation"),(0,r.kt)("li",{parentName:"ul"},"Re-enable brainCloud screens"),(0,r.kt)("li",{parentName:"ul"},"Re-enable Segment processing"),(0,r.kt)("li",{parentName:"ul"},"Remove banner")))),(0,r.kt)("hr",null),(0,r.kt)("h2",{id:"faq-frequenty-asked-questions"},"FAQ (Frequenty Asked Questions)"),(0,r.kt)("h4",{id:"why-is-braincloud-moving-to-mongodb-atlas"},"Why is brainCloud moving to MongoDB Atlas?"),(0,r.kt)("p",null,"Moving to Atlas will offload the low-level server and software maintenance responsibilities from brainCloud DevOps personnel. It means less work keeping the servers secure, up-to-date and running properly - but also means that performing common operations like software upgrades, vertical and horizontal scaleouts, etc. are all handled automatically."),(0,r.kt)("p",null,"There are also benefits to monitoring the performance of the database -- and a recommendations engine that brainCloud is considering leveraging for future Custom Entity enhancements."),(0,r.kt)("h4",{id:"will-my-players-or-developers-notice-any-changes-once-the-system-is-running-on-atlas"},"Will my players or developers notice any changes once the system is running on Atlas?"),(0,r.kt)("p",null,"No."),(0,r.kt)("h4",{id:"will-my-players-or-developers-notice-any-changes-during-the-migration-to-atlas"},"Will my players or developers notice any changes during the migration to Atlas?"),(0,r.kt)("p",null,"P",(0,r.kt)("em",{parentName:"p"},"otentially. See the Player Visible Service Impacts section above.")),(0,r.kt)("h4",{id:"what-if-something-goes-massively-wrong-during-migration"},"What if something goes massively wrong during migration?"),(0,r.kt)("p",null,"If the migration appears compromised in any way, we will abort. The database will remain on the existing servers - and we will reschedule the migration for a future date."),(0,r.kt)("p",null,"Information"),(0,r.kt)("p",null,"If you have further questions or concerns, please reach out to brainCloud Support via the chat widget."))}m.isMDXComponent=!0}}]);