<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-learn/cloud-code-central/cloud-code-tutorials/cloud-code-tutorial4-pre-and-post-hooks/index">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">CC Tutorial4 - Pre and Post Hooks | brainCloud docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://getbraincloud.github.io/braincloud-apiref/learn/cloud-code-central/cloud-code-tutorials/cloud-code-tutorial4-pre-and-post-hooks/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="CC Tutorial4 - Pre and Post Hooks | brainCloud docs"><meta data-rh="true" name="description" content="Pre and Post Hooks allow you to attach Cloud Code scripts to brainCloud&#x27;s Client API - in effect, &quot;hooking&quot; into the API either before (pre) or after (post) the API method has been executed."><meta data-rh="true" property="og:description" content="Pre and Post Hooks allow you to attach Cloud Code scripts to brainCloud&#x27;s Client API - in effect, &quot;hooking&quot; into the API either before (pre) or after (post) the API method has been executed."><link data-rh="true" rel="icon" href="/braincloud-apiref/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://getbraincloud.github.io/braincloud-apiref/learn/cloud-code-central/cloud-code-tutorials/cloud-code-tutorial4-pre-and-post-hooks/"><link data-rh="true" rel="alternate" href="https://getbraincloud.github.io/braincloud-apiref/learn/cloud-code-central/cloud-code-tutorials/cloud-code-tutorial4-pre-and-post-hooks/" hreflang="en"><link data-rh="true" rel="alternate" href="https://getbraincloud.github.io/braincloud-apiref/learn/cloud-code-central/cloud-code-tutorials/cloud-code-tutorial4-pre-and-post-hooks/" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/braincloud-apiref/blog/rss.xml" title="brainCloud docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/braincloud-apiref/blog/atom.xml" title="brainCloud docs Atom Feed">
<link rel="alternate" type="application/json" href="/braincloud-apiref/blog/feed.json" title="brainCloud docs JSON Feed">




<link rel="alternate" type="application/rss+xml" href="/braincloud-apiref/release/rss.xml" title="brainCloud docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/braincloud-apiref/release/atom.xml" title="brainCloud docs Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="brainCloud docs" href="/braincloud-apiref/opensearch.xml"><link rel="stylesheet" href="/braincloud-apiref/assets/css/styles.298e004a.css">
<link rel="preload" href="/braincloud-apiref/assets/js/runtime~main.ce9b4845.js" as="script">
<link rel="preload" href="/braincloud-apiref/assets/js/main.36542635.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">⭐️ Subscript brainCloud service on <a target="_blank" rel="noopener noreferrer" href="https://portal.braincloudservers.com/login#/development">brainCloud portal</a></div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/braincloud-apiref/"><div class="navbar__logo"><img src="/braincloud-apiref/img/logobc_v_forlightbg.svg" alt="brainCloud Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/braincloud-apiref/img/logobc_v_fordarkbg1.svg" alt="brainCloud Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">brainCloud Docs</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/braincloud-apiref/learn/introduction/">Learn</a><a class="navbar__item navbar__link" href="/braincloud-apiref/api/introduction">API</a><a class="navbar__item navbar__link" href="/braincloud-apiref/blog">Blog</a><a class="navbar__item navbar__link" href="/braincloud-apiref/release">Release</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/braincloud-apiref/">4.13.0</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/braincloud-apiref/learn/cloud-code-central/cloud-code-tutorials/cloud-code-tutorial4-pre-and-post-hooks/">4.13.0</a></li><li><a class="dropdown__link" href="/braincloud-apiref/4.12.0/">4.12.0</a></li></ul></div><a href="https://github.com/getbraincloud" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/braincloud-apiref/learn/introduction/">Introduction</a><button aria-label="Toggle the collapsible sidebar category &#x27;Introduction&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/braincloud-apiref/learn/key-concepts/">Key Concepts</a><button aria-label="Toggle the collapsible sidebar category &#x27;Key Concepts&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/braincloud-apiref/learn/client-libraries">Client Libraries</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/braincloud-apiref/learn/api-reference">API Reference</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/braincloud-apiref/learn/cloud-code-central/">Cloud Code Central</a><button aria-label="Toggle the collapsible sidebar category &#x27;Cloud Code Central&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/braincloud-apiref/learn/cloud-code-central/cloud-code-tutorials/">Cloud Code Tutorials</a><button aria-label="Toggle the collapsible sidebar category &#x27;Cloud Code Tutorials&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/braincloud-apiref/learn/cloud-code-central/cloud-code-tutorials/cloud-code-tutorial-background/">CC Tutorial - Background</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/braincloud-apiref/learn/cloud-code-central/cloud-code-tutorials/cloud-code-tutorial1-your-first-script/">CC Tutorial1 - Your First Script</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/braincloud-apiref/learn/cloud-code-central/cloud-code-tutorials/cloud-code-tutorial2-making-api-calls/">CC Tutorial2 - Making API calls</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/braincloud-apiref/learn/cloud-code-central/cloud-code-tutorials/cloud-code-tutorial3-working-with-entities/">CC Tutorial3 - Working with Entities</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/braincloud-apiref/learn/cloud-code-central/cloud-code-tutorials/cloud-code-tutorial4-pre-and-post-hooks/">CC Tutorial4 - Pre and Post Hooks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/braincloud-apiref/learn/cloud-code-central/cloud-code-tutorials/cloud-code-tutorial5-external-web-service/">CC Tutorial5 - External Web Services</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/braincloud-apiref/learn/cloud-code-central/cloud-code-tutorials/cloud-code-tutorial6-s2s-cloud-code-scripts/">CC Tutorial6 – S2S Scripts</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/braincloud-apiref/learn/cloud-code-central/handy-cloud-code-scripts/">Handy Cloud Code Scripts</a><button aria-label="Toggle the collapsible sidebar category &#x27;Handy Cloud Code Scripts&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/braincloud-apiref/learn/portal-tutorials/">Portal Tutorials</a><button aria-label="Toggle the collapsible sidebar category &#x27;Portal Tutorials&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/braincloud-apiref/learn/sdk-tutorials/">SDK Tutorials</a><button aria-label="Toggle the collapsible sidebar category &#x27;SDK Tutorials&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/braincloud-apiref/learn/support">Support</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/braincloud-apiref/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/braincloud-apiref/learn/cloud-code-central/"><span itemprop="name">Cloud Code Central</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/braincloud-apiref/learn/cloud-code-central/cloud-code-tutorials/"><span itemprop="name">Cloud Code Tutorials</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">CC Tutorial4 - Pre and Post Hooks</span><meta itemprop="position" content="3"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 4.13.0</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>CC Tutorial4 - Pre and Post Hooks</h1></header><p>Pre and Post Hooks allow you to attach Cloud Code scripts to brainCloud&#x27;s Client API - in effect, &quot;hooking&quot; into the API either before (pre) or after (post) the API method has been executed.</p><p>Pre-hooks allow you to pre-process data before it is sent to the API method. You can even change the parameters that are sent or abort the API call altogether.</p><p>Post-hooks allows you to massage the data that is returned after an API method executes.</p><p>To utilize a pre or post-hook to modify brainCloud&#x27;s behaviour, you:</p><ul><li>First write the cloud code script with the appropriate parameter/return syntax (see below, or the <a href="/braincloud-apiref/api//cc/writingscript#api-hooks">API Reference</a>)</li><li>Then attach the cloud code script to the API method via the <strong>Design | Cloud Code | API Hooks</strong> page of the portal</li></ul><p>The format and function of cloud code scripts are different from standard cloud code, so we&#x27;ve created two examples below.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="pre-hooks">Pre Hooks<a class="hash-link" href="#pre-hooks" title="Direct link to heading">​</a></h2><p>Pre-hook scripts are executed <strong>before</strong> the API call they are hooked to.  They allow you to preprocess the data that gets passed to the API call, or even return an error immediately and skip the API call altogether.</p><p>To create a pre-hook script starts by creating a new Cloud Code script in the Cloud Code | Scripts section of the design tab.</p><p>Once you&#x27;ve created the script, go to the Edit tab and we&#x27;ll write the logic for our hook.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="accessing--returning-data">Accessing &amp; Returning Data<a class="hash-link" href="#accessing--returning-data" title="Direct link to heading">​</a></h4><p>Similar to how regular Cloud Code scripts work, the parameters passed into the hook can be accessed through the &quot;data&quot; object.  However, the fields inside the object are different when the script is a hook. These are the available fields:</p><ul><li><strong>service </strong> - The service that the API being hooked belongs to</li><li><strong>operation</strong> - The operation name for the hooked API</li><li><strong>message</strong> - The parameters being passed to the API</li><li><strong>parms</strong> - The custom parameters for the hook.  These are configured when adding the hook in the API Hooks page (covered further down).</li></ul><p>In addition to the unique data object passed in, pre-hook scripts return a specific object that contains several fields that must be present for certain operations:</p><ul><li><strong>status</strong> - When set to a non-200 value the API call will be aborted, and an error return to the calling client</li><li><strong>messageOverride</strong> - When a hook wants to modify the parameters being passed on to the API, the modified parameters must be assigned to this field of the return object</li><li><strong>reasonCode</strong> - A custom reason code for when the status is set to non-200. This is returned to the client as part of the error</li><li><strong>errorMessage</strong> - A custom error message for when the status is set to non-200. This is returned to the client as part of the error</li><li><strong>parms</strong> - The custom parameters for the hook.  These are configured when adding the hook in the API Hooks page (covered further down).</li></ul><p>For this tutorial, we will hook onto the PlayerStatisitics | SetExperiencePoints API, and we need to keep in mind the parameters that get passed to it when writing our pre-hook. A single parameter is passed to the SetExperiencePoints API:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string-property property" style="color:#36acaa">&quot;xp_points&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The goal of our pre-hook is to multiply all XP values passed into this API method, therefore we need to modify the &quot;xp_points&quot; field of the &quot;message&quot; and add it to the &quot;messageOverride&quot; field of the return object.</p><p>To give an example of returning an error, our script will also abort the call if the &quot;xp_points&quot; value is over a certain threshold.</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">message </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">message</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//get the passed in API parameters</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">hookParms </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">parms</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//get the custom hook parameters</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">xp_points</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*=</span><span class="token plain"> hookParms</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">experienceMultiplier</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//multiply the XP points value that was passed in</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> retval </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//prepare the return object</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">message</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">xp_points</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// the xp value is too large, return an error</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   retval</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">status</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">500</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   retval</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">reasonCode</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50000</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   retval</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">errorMessage</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;XP value is too high!&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// pass the multiplied XP value onto the API</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   retval</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">status</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">200</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   retval</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">messageOverride</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> message</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">retval</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//return the object</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="post-hooks">Post Hooks<a class="hash-link" href="#post-hooks" title="Direct link to heading">​</a></h2><p>Post-hook scripts are called after executing a particular API call. Post-hook scripts can do some post-processing for an API call as well as optionally modifying the data returned to the client.</p><p>Let&#x27;s create a post hook for the SetExperiencePoints method.  The process is similar to creating a pre-hook, but once again the input &quot;data&quot; object and return object fields have changed.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="accessing--returning-data-1">Accessing &amp; Returning Data<a class="hash-link" href="#accessing--returning-data-1" title="Direct link to heading">​</a></h4><p>Similar to pre-hook scripts, the “service”, “operation” and “parms” are passed to the script. The “message” component is the result of the call rather than the original calling message data. The original calling message is passed in as “callingMessage”.</p><ul><li><strong>service </strong> - The service that the API being hooked belongs to</li><li><strong>operation</strong> - The operation name for the hooked API</li><li><strong>message</strong> - The result of the API call</li><li><strong>callingMessage</strong> - The original message parameters passed into the API</li><li><strong>parms</strong> - The custom parameters for the hook.  These are configured when adding the hook in the API Hooks page (covered further down).</li></ul><p>The returned object for post hooks also differs slightly from pre hooks.  First, a null return object from the script will cause the return message from the API to be sent without modification.  Like the pre-hook, returning a non-200 status will return an error to the calling client with the specified reason code and error message.</p><p>To override the message data returned to the client, assign the modified message to the &quot;data&quot; field of the return object.</p><p>These are all the return object fields:</p><ul><li><strong>status</strong> - When set to a non-200 value the API call will be aborted, and an error return to the calling client</li><li><strong>data</strong>- When a hook wants to modify the message being returned to the client, the modified parameters must be assigned to this field of the return object</li><li><strong>reasonCode</strong> - A custom reason code for when the status is set to non-200. This is returned to the client as part of the error</li><li><strong>errorMessage</strong> - A custom error message for when the status is set to non-200. This is returned to the client as part of the error</li></ul><p>In our example script, we will simply append a bool to the return data.</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">message </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">message</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//get the result of the API call</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">message</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">wasPostHooked</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//append the bool to the result</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">var</span><span class="token plain"> retval </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">retval</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">status</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">200</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">retval</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">data</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> message</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//add the modified message to the return object</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">retval</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//return the object</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="addinga-hook">Adding A Hook<a class="hash-link" href="#addinga-hook" title="Direct link to heading">​</a></h2><p>Now we&#x27;ll go over how a hook is configured in the portal.  This is the process of assigning a script to a specific API method, as a pre or post hook.</p><ul><li>First, you will need to have your script created in the Cloud Code | Scripts section of the design tab.</li><li>Next, go to the API Hooks tab (also under the Cloud Code heading).</li><li>Click the Create button to configure a new hook. You will see the dialogue below.</li></ul><p><a target="_blank" href="/braincloud-apiref/assets/files/Tut4_PrePostHook-1-d83f35f8fa9d340d8b82b9e4861e5bed.png"><img loading="lazy" src="data:image/png;base64,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" width="556" height="598" class="img_ev3q"></a></p><p>The dialogue is fairly straightforward.  Select the Service and Operation you want to hook, choose whether it is a pre (before API execution) or post (after API execution) hook, and then select the actual hook script.</p><p>The Params section is where you can configure the custom data passed into your hook.  In our example, we are hooking onto the SetExperiencePoints method, and our post hook script will modify the XP amount that gets set.  It will multiply the original value passed in with the call and multiply it by the parameter we have set here, experienceMultiplier.</p><p>Once you&#x27;ve configured your parameters you&#x27;re done!  Your hook script will be executed whenever and wherever the hooked API method is called.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/getbraincloud/braincloud-apiref/tree/main/docs/learn/4_cloud-code-central/cloud-code-tutorials/cloud-code-tutorial4-pre-and-post-hooks/index.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2023-01-02T17:18:12.000Z">Jan 2, 2023</time></b> by <b>jasonl</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/braincloud-apiref/learn/cloud-code-central/cloud-code-tutorials/cloud-code-tutorial3-working-with-entities/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">CC Tutorial3 - Working with Entities</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/braincloud-apiref/learn/cloud-code-central/cloud-code-tutorials/cloud-code-tutorial5-external-web-service/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">CC Tutorial5 - External Web Services</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#pre-hooks" class="table-of-contents__link toc-highlight">Pre Hooks</a></li><li><a href="#post-hooks" class="table-of-contents__link toc-highlight">Post Hooks</a></li><li><a href="#addinga-hook" class="table-of-contents__link toc-highlight">Adding A Hook</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/braincloud-apiref/">Learn</a></li><li class="footer__item"><a class="footer__link-item" href="/braincloud-apiref/api/introduction">API</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.youtube.com/@Getbraincloud" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.facebook.com/braincloudnews" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/brainCloudBaaS" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/braincloud-apiref/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/getbraincloud/braincloud-apiref/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 bitHeads, Inc</div></div></div></footer></div>
<script src="/braincloud-apiref/assets/js/runtime~main.ce9b4845.js"></script>
<script src="/braincloud-apiref/assets/js/main.36542635.js"></script>
<script>window.intercomSettings={api_base:"https://api-iam.intercom.io",app_id:"za9nz70e"},function(){var t=window,e=t.Intercom;if("function"==typeof e)e("reattach_activator"),e("update",t.intercomSettings);else{var n=document,a=function(){a.c(arguments)};a.q=[],a.c=function(t){a.q.push(t)},t.Intercom=a;var i=function(){var t=n.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://widget.intercom.io/widget/za9nz70e";var e=n.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)};"complete"===document.readyState?i():t.attachEvent?t.attachEvent("onload",i):t.addEventListener("load",i,!1)}}()</script></body>
</html>