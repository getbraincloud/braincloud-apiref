<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.2.0">
<title data-rh="true">Wrappers, Clients and Inconvenient Singletons... | brainCloud docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://getbraincloud.github.io/braincloud-apiref/blog/2017/12/12/wrappers-clients-and-inconvenient-singletons"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Wrappers, Clients and Inconvenient Singletons... | brainCloud docs"><meta data-rh="true" name="description" content="With release 3.6.5, brainCloud is breaking away from the singletons that were previously a key aspect of our client libraries."><meta data-rh="true" property="og:description" content="With release 3.6.5, brainCloud is breaking away from the singletons that were previously a key aspect of our client libraries."><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2017-12-12T00:00:00.000Z"><meta data-rh="true" property="article:author" content="https://github.com/winterhalder"><meta data-rh="true" property="article:tag" content="blog"><link data-rh="true" rel="icon" href="/braincloud-apiref/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://getbraincloud.github.io/braincloud-apiref/blog/2017/12/12/wrappers-clients-and-inconvenient-singletons"><link data-rh="true" rel="alternate" href="https://getbraincloud.github.io/braincloud-apiref/blog/2017/12/12/wrappers-clients-and-inconvenient-singletons" hreflang="en"><link data-rh="true" rel="alternate" href="https://getbraincloud.github.io/braincloud-apiref/blog/2017/12/12/wrappers-clients-and-inconvenient-singletons" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/braincloud-apiref/blog/rss.xml" title="brainCloud docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/braincloud-apiref/blog/atom.xml" title="brainCloud docs Atom Feed">
<link rel="alternate" type="application/json" href="/braincloud-apiref/blog/feed.json" title="brainCloud docs JSON Feed">




<link rel="alternate" type="application/rss+xml" href="/braincloud-apiref/release/rss.xml" title="brainCloud docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/braincloud-apiref/release/atom.xml" title="brainCloud docs Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="brainCloud docs" href="/braincloud-apiref/opensearch.xml"><link rel="stylesheet" href="/braincloud-apiref/assets/css/styles.298e004a.css">
<link rel="preload" href="/braincloud-apiref/assets/js/runtime~main.ce9b4845.js" as="script">
<link rel="preload" href="/braincloud-apiref/assets/js/main.36542635.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">⭐️ Subscript brainCloud service on <a target="_blank" rel="noopener noreferrer" href="https://portal.braincloudservers.com/login#/development">brainCloud portal</a></div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/braincloud-apiref/"><div class="navbar__logo"><img src="/braincloud-apiref/img/logobc_v_forlightbg.svg" alt="brainCloud Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/braincloud-apiref/img/logobc_v_fordarkbg1.svg" alt="brainCloud Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">brainCloud Docs</b></a><a class="navbar__item navbar__link" href="/braincloud-apiref/learn/introduction/">Learn</a><a class="navbar__item navbar__link" href="/braincloud-apiref/api/introduction">API</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/braincloud-apiref/blog">Blog</a><a class="navbar__item navbar__link" href="/braincloud-apiref/release">Release</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/braincloud-apiref/">4.13.0</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/braincloud-apiref/">4.13.0</a></li><li><a class="dropdown__link" href="/braincloud-apiref/4.12.0/">4.12.0</a></li></ul></div><a href="https://github.com/getbraincloud" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">All posts</div><ul class="sidebarItemList_Yudw clean-list"><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/braincloud-apiref/blog/2021/07/22/migrating-from-gamesparks">Migrating from GameSparks</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/braincloud-apiref/blog/2021/03/11/apple-ios-14-5-privacy-facebook-limited-login-mode">Apple iOS 14.5 Privacy &amp; Facebook Limited Login mode</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/braincloud-apiref/blog/2019/06/17/warning-unity-2019-x-ios-issues">Warning: Unity 2019.X (iOS) issues</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/braincloud-apiref/blog/2019/05/24/forums-are-live">Forums are live!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/braincloud-apiref/blog/2019/05/22/v4-is-coming">V4 is coming!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/braincloud-apiref/blog/2019/05/18/braincloud-4-billing-plans">brainCloud 4 Billing Plans</a></li><li class="sidebarItem__DBe"><a aria-current="page" class="sidebarItemLink_mo7H sidebarItemLinkActive_I1ZP" href="/braincloud-apiref/blog/2017/12/12/wrappers-clients-and-inconvenient-singletons">Wrappers, Clients and Inconvenient Singletons...</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/braincloud-apiref/blog/2017/01/30/introducing-global-tournaments">Introducing Global Tournaments</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/braincloud-apiref/blog/2016/01/30/parse-and-who-can-you-trust">Parse and who can you trust?</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/braincloud-apiref/blog/2015/11/10/launch-tip-1-version-enforcement">Launch Tip #1: Version Enforcement</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/braincloud-apiref/blog/2015/02/19/braincloud-at-gdc">brainCloud at GDC!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/braincloud-apiref/blog/2015/01/20/5-steps-to-ignite-your-free-to-play-revenue-without-advertising">5 Steps to Ignite your Free-to-Play Revenue (without Advertising)</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/braincloud-apiref/blog/2015/01/16/braincloud-baas-is-for-apps-too">brainCloud BaaS is for Apps too</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/braincloud-apiref/blog/2015/01/09/baas-for-single-player-games">BaaS for Single-Player Games</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/braincloud-apiref/blog/2014/12/01/braincloud-pricing-update">brainCloud Pricing Update!</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/braincloud-apiref/blog/2014/11/12/bitheads-announces-braincloud">bitHeads announces brainCloud</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/braincloud-apiref/blog/2014/11/08/unity-tutorial-1-getting-started">Unity Tutorial #1 - Getting Started</a></li><li class="sidebarItem__DBe"><a class="sidebarItemLink_mo7H" href="/braincloud-apiref/blog/2014/10/08/braincloud-a-backend-for-games">brainCloud: A Backend For Games</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="title_f1Hy" itemprop="headline">Wrappers, Clients and Inconvenient Singletons...</h1><div class="container_mt6G margin-vert--md"><time datetime="2017-12-12T00:00:00.000Z" itemprop="datePublished">December 12, 2017</time> · <!-- -->5 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><a href="https://github.com/winterhalder" target="_blank" rel="noopener noreferrer" class="avatar__photo-link"><img class="avatar__photo" src="https://github.com/winterhalder.png" alt="Paul Winterhalder"></a><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><a href="https://github.com/winterhalder" target="_blank" rel="noopener noreferrer" itemprop="url"><span itemprop="name">Paul Winterhalder</span></a></div><small class="avatar__subtitle" itemprop="description">brainCloud product owner</small></div></div></div></div></header><div id="post-content" class="markdown" itemprop="articleBody"><p>With release 3.6.5, brainCloud is breaking away from the singletons that were previously a key aspect of our client libraries.</p><p>We thought we&#x27;d take a moment to discuss the pros and cons of the design, and explain where and why we are going a different route.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="background">Background<a class="hash-link" href="#background" title="Direct link to heading">​</a></h2><p>To start, lets review the purpose and design of the client library.</p><p>The goal of the client library is to <em>simplify development of brainCloud-based applications</em>. It does this by:</p><ul><li>providing local implementation of brainCloud client calls (instead of forcing the client app to use Raw REST calls)</li><li>automating communications with the server (bundling of messages for efficiency, packet security, and more)</li><li>performing standard error handling</li></ul><p>The library is actually organized into two major components:</p><ul><li>the brainCloud Client Library - a pure, platform-independent wrapper of the brainCloud client-server protocol</li><li>the brainCloud Wrapper - simplifies aspects of the API (especially authentication) by incorporating more client-side functionality, like saving and restoring anonymousIds and profileIds.</li></ul><p>Use of the client library is required by apps. Use of the wrapper is highly recommended, but optional. <em>Note - originally we only had the client library. The wrapper was added later as an aid to app developers.</em> </p><hr><p>Delving deeper into the design, you can see that the client object maintains a list of services and internal components that work together to provide the client functionality. The wrapper on the other hand is quite simple, and merely adds an additional simplification layer to the API.</p><p><a target="_blank" href="/braincloud-apiref/assets/files/braincloud-client-api-architecture-details-a91ef7c8f27f52a78ba75b808797b9c8.png"><img loading="lazy" src="/braincloud-apiref/assets/images/braincloud-client-api-architecture-details-a91ef7c8f27f52a78ba75b808797b9c8.png" width="661" height="541" class="img_ev3q"></a></p><p>Of significance here is the use of singletons. There are two singletons in play - one for the client, and one for the wrapper. Not only are the singletons used as the reference from the client to the wrapper and/or client library objects - but they are also used for communications between BrainCloudWrapper and BrainCloudClient.</p><p>In hindsight, although our intentions were good - this usage of singletons was a mistake.</p><p>The cons (as we now see them) are:</p><ul><li>Complicates the client code (calling the static class methods to retrieve a reference to the wrapper and or client object is more painful than using a direct global of some sort)</li><li>Complicates the documented code examples</li><li>Restricts a client to have one-and-only-one connection to the brainCloud server <!-- -->[ <em>this is a crippling restriction for some use cases - couch co-op anyone?</em> ]</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-fix">The fix<a class="hash-link" href="#the-fix" title="Direct link to heading">​</a></h2><p>And so, we are fixing this.</p><p><a target="_blank" href="/braincloud-apiref/assets/files/braincloud-client-api-architecture-new-3557e789930ecf9b75c70cd3f54173ba.png"><img loading="lazy" src="/braincloud-apiref/assets/images/braincloud-client-api-architecture-new-3557e789930ecf9b75c70cd3f54173ba.png" width="369" height="419" class="img_ev3q"></a></p><p>The changes to the new client libraries are three-fold:</p><ul><li><code>BrainCloudWrapper</code> objects now have their own reference to their associated <code>BrainCloudClient</code> companions</li><li><code>BrainCloudWrapper</code> objects also now provide direct methods for accessing the client services: you no longer have to call <em>wrapper → client → service → operation</em>, instead it is simply <em>wrapper → service → operation</em></li></ul><p>The result is that instead of your client code looking like this:</p><p><code>BrainCloudWrapper.Instance.GetBC().LeaderboardService.ListAllLeaderboards( ApiSuccess, ApiError);</code></p><p>It can look like this:</p><p><code>_bc.LeaderboardService.ListAllLeaderboards( ApiSuccess, ApiError);</code></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-changes">The Changes<a class="hash-link" href="#the-changes" title="Direct link to heading">​</a></h2><p>So - more flexibility and clearer code? What&#x27;s the catch?</p><p>The catch is that you need to make a few changes to your client to get this goodness. For new apps it&#x27;s no big deal at all - this could be a pain for existing apps though, so we are still including a legacy singleton mode in the client libraries - but that needs to be specifically enabled.</p><p><em><strong>Update: Legacy Singleton Mode has been removed from brainCloud client libraries beginning with 4.0.</strong></em> </p><p>Here are the steps to getting your app working using the updated libraries</p><ol><li>Grab the latest brainCloud client library from the portal via the <strong>Team | Client Libs</strong> page.</li><li>Create an instance of <code>BrainCloudWrapper</code> and save it to a global accessible throughout your client app. In our documentation examples we use <!-- -->_<!-- -->bc, but it can be anything</li><li>Adjust any client code to use this new reference - try searching and replacing<ol><li>&quot;BrainCloudWrapper.Client.&quot; → &quot;<!-- -->_<!-- -->bc.&quot;</li><li>&quot;BrainCloudClient.Instance.&quot; → &quot;<!-- -->_<!-- -->bc.&quot;</li></ol></li></ol><p>And that&#x27;s about it.</p><p>Note - you can optionally specify a <!-- -->_<em>wrapperName</em> to use creating the wrapper. This name will be used as a key when storing data about the session, like the anonymousId and profileId.</p><p>You only need to specify the <em>_<!-- -->wrapperName</em> if you are implementing a client with multiple concurrent connections to the brainCloud server (to help keep the session data separate). <em><strong>In particular, if you are updating an existing app, do not specify a profile-name - this ensures that the user does not lose their saved profile references when they upgrade to the latest version of your app!</strong></em></p><div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">_bc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name">BrainCloudWrapper</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// optionally pass in a _wrapperName</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">_bc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">initialize</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_appId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> _secret</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> _appVersion</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">_bc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> go</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">AddComponent</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">lt</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">BrainCloudWrapper</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">gt</span><span class="token punctuation" style="color:#393A34">;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">_bc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">WrapperName </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;_example&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// optionally set a wrapper-name</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">_bc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="legacy-singleton-mode">Legacy Singleton Mode<a class="hash-link" href="#legacy-singleton-mode" title="Direct link to heading">​</a></h2><p><em><strong>Update: Legacy Singleton Mode has been removed from brainCloud client libraries beginning with 4.0.</strong></em> </p><p>Want to move to the new libraries, but change as little code as possible? No worries, we have you covered. Here&#x27;s what you do:</p><ol><li>Grab the latest brainCloud client library from the portal via the <strong>Team | Client Libs</strong> page.</li><li>Turn on legacy singleton mode via the <code>BrainCloudClient.EnableSingletonMode()</code> API call. Put the call in your code right before you initialize the library.</li><li>Unity only (and only if you were using the <code>Client</code> static class accessor): Adjust any calls to <code>BrainCloudWrapper.Client.aService().anOperation()</code> to use <code>BrainCloudWrapper.Instance.Client.aService().anOperation()</code> instead (Note the additional Instance step).</li></ol><p>The following code snippet shows how to enable singleton mode in various languages:</p><div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">BrainCloudClient</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">EnableSingletonMode </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Turn on legacy singleton mode</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BrainCloudWrapper</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getInstance</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">initialize</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">_appId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> _secret</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> _appVersion</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">BrainCloudClient</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">EnableSingletonMode </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Turn on legacy singleton mode</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">BrainCloudWrapper</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">getInstance</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Init</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">​</a></h2><p>Anyway, thats the summary of what we have changed, and why.</p><p>We hope you agree that the improvements to functionality and readability are worth it.</p><p>If you have any feedback or concerns, feel free to hit the chat link and let us know.</p><p>Cheers!</p></div><footer class="row docusaurus-mt-lg blogPostFooterDetailsFull_mRVl"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a class="tag_zVej tagRegular_sFm0" href="/braincloud-apiref/blog/tags/blog">blog</a></li></ul></div><div class="col margin-top--sm"><a href="https://github.com/getbraincloud/braincloud-apiref/tree/main/blog/2017-12-12-wrappers-clients-and-inconvenient-singletons/index.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/braincloud-apiref/blog/2019/05/18/braincloud-4-billing-plans"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">brainCloud 4 Billing Plans</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/braincloud-apiref/blog/2017/01/30/introducing-global-tournaments"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Introducing Global Tournaments</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#background" class="table-of-contents__link toc-highlight">Background</a></li><li><a href="#the-fix" class="table-of-contents__link toc-highlight">The fix</a></li><li><a href="#the-changes" class="table-of-contents__link toc-highlight">The Changes</a></li><li><a href="#legacy-singleton-mode" class="table-of-contents__link toc-highlight">Legacy Singleton Mode</a></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/braincloud-apiref/">Learn</a></li><li class="footer__item"><a class="footer__link-item" href="/braincloud-apiref/api/introduction">API</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.youtube.com/@Getbraincloud" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.facebook.com/braincloudnews" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/brainCloudBaaS" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/braincloud-apiref/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/getbraincloud/braincloud-apiref/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 bitHeads, Inc</div></div></div></footer></div>
<script src="/braincloud-apiref/assets/js/runtime~main.ce9b4845.js"></script>
<script src="/braincloud-apiref/assets/js/main.36542635.js"></script>
<script>window.intercomSettings={api_base:"https://api-iam.intercom.io",app_id:"za9nz70e"},function(){var t=window,e=t.Intercom;if("function"==typeof e)e("reattach_activator"),e("update",t.intercomSettings);else{var n=document,a=function(){a.c(arguments)};a.q=[],a.c=function(t){a.q.push(t)},t.Intercom=a;var i=function(){var t=n.createElement("script");t.type="text/javascript",t.async=!0,t.src="https://widget.intercom.io/widget/za9nz70e";var e=n.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)};"complete"===document.readyState?i():t.attachEvent?t.attachEvent("onload",i):t.addEventListener("load",i,!1)}}()</script></body>
</html>